"use strict";var lockScroll=function(){document.body.classList.toggle("js-lock"),document.body.classList.contains("js-lock")||document.body.toggleAttribute("class")},overlay=document.querySelector(".overlay"),form=document.querySelector("#form");null!=overlay&&overlay.addEventListener("click",function(){for(var e=document.querySelectorAll(".form__field input"),t=document.querySelectorAll(".js-invalid-label"),r=0;r<e.length;r++)e[r].classList.remove("js-invalid");for(var o=0;o<t.length;o++)t[o].remove();modalToggleVisible()});var switchLabel=document.querySelectorAll(".switch__label");null!=switchLabel&&switchLabel.forEach(function(e){e.addEventListener("click",function(){e.querySelector("input").checked?e.classList.add("js-toggle"):e.classList.remove("js-toggle")})});var counterItem=document.querySelectorAll(".counter__item");null!=counterItem&&counterItem.forEach(function(e){var t=e.querySelector(".counter__input"),r=e.querySelector(".counter__plus"),e=e.querySelector(".counter__minus"),o=parseInt(t.getAttribute("max")),l=parseInt(t.getAttribute("min"));r.addEventListener("click",function(){t.value>=o?t.value=o:(t.value++,t.setAttribute("value",t.value))}),e.addEventListener("click",function(){t.value<=l?t.value=l:(t.value--,t.setAttribute("value",t.value))}),t.addEventListener("keyup",function(){t.value>=o?t.value=o:t.value<=l&&(t.value=l)})});var burger=document.querySelector(".burger"),header=document.querySelector(".header");burger.addEventListener("click",function(){header.classList.toggle("js-nav-open"),lockScroll()});var video=document.querySelector(".video__item"),videoPlayButton=document.querySelector(".video__play"),videoPreview=document.querySelector(".video__preview");null!=videoPlayButton&&videoPlayButton.addEventListener("click",function(){video.style.display="block",videoPlayButton.style.display="none"});var modalTrigger=document.querySelectorAll(".modal-trigger"),modalWindow=document.querySelector(".modal");null!=modalTrigger&&modalTrigger.forEach(function(e){e.addEventListener("click",function(){modalToggleVisible()})});var validationForm,modalToggleVisible=function(){modalWindow.classList.toggle("js-show"),overlay.classList.toggle("js-show"),lockScroll(),setTimeout(function(){modalWindow.classList.remove("js-submit")},300)};function closeOpenNavs(){for(var e=document.querySelectorAll(".dropdown__trigger"),t=0;t<e.length;t++){var r=e[t];r.parentElement.classList.contains("js-open")&&r.parentElement.classList.remove("js-open")}}document.querySelector("#form")&&((validationForm=new JustValidate("#form",{errorFieldCssClass:"js-invalid",errorLabelCssClass:"js-invalid-label",lockForm:!0,errorLabelStyle:{textDecoration:"underlined"}})).addField("#user_name",[{rule:"minLength",value:3,errorMessage:"Minimum 3 characters required"},{rule:"required",errorMessage:"Name is required"}]).addField("#user_email",[{rule:"required",errorMessage:"Email is required"},{rule:"email",errorMessage:"Email is invalid"}]).onSuccess(function(e){e.preventDefault(),modalWindow?modalWindow.classList.add("js-submit"):window.location.href="thanks.html"}),document.querySelector("#user_company")&&validationForm.addField("#user_company",[{rule:"required",errorMessage:"Company is required"}])),Element.prototype.closest||(Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest=function(e){var t=this;if(!document.documentElement.contains(this))return null;do{if(t.matches(e))return t}while(null!==(t=t.parentElement));return null}),document.addEventListener("click",function(e){e.target.closest(".dropdown__trigger")?e.target.closest(".dropdown__trigger")&&e.target.parentElement.closest(".js-open")?e.target.closest(".dropdown__trigger").parentElement.classList.remove("js-open"):e.target.closest(".dropdown__trigger")&&(closeOpenNavs(),e.target.closest(".dropdown__trigger").parentElement.classList.add("js-open")):closeOpenNavs()},!1);var benefitsSlider,planSlider=new Swiper(".plan__slider",{loop:!1,slidesPerView:1,spaceBetween:30,speed:300,breakpoints:{768:{slidesPerView:2},1200:{slidesPerView:3}},pagination:{el:".plan__pagination"},navigation:{nextEl:".plan__button-next",prevEl:".plan__button-prev"}});window.matchMedia("(min-width: 992px)").matches?document.addEventListener("DOMContentLoaded",function(){OverlayScrollbars(document.querySelectorAll("body"),{})}):benefitsSlider=new Swiper(".benefits__slider",{loop:!1,slidesPerView:1,spaceBetween:30,speed:300,breakpoints:{768:{slidesPerView:2}},pagination:{el:".benefits__pagination"},navigation:{nextEl:".benefits__button-next",prevEl:".benefits__button-prev"}});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsibG9ja1Njcm9sbCIsImRvY3VtZW50IiwiYm9keSIsImNsYXNzTGlzdCIsInRvZ2dsZSIsImNvbnRhaW5zIiwidG9nZ2xlQXR0cmlidXRlIiwib3ZlcmxheSIsInF1ZXJ5U2VsZWN0b3IiLCJmb3JtIiwiYWRkRXZlbnRMaXN0ZW5lciIsImZvcm1GaWVsZElucHV0IiwicXVlcnlTZWxlY3RvckFsbCIsImZvcm1GaWVsZExhYmVsIiwiaSIsImxlbmd0aCIsInJlbW92ZSIsIm1vZGFsVG9nZ2xlVmlzaWJsZSIsInN3aXRjaExhYmVsIiwiZm9yRWFjaCIsImUiLCJjaGVja2VkIiwiYWRkIiwiY291bnRlckl0ZW0iLCJjb3VudGVySW5wdXQiLCJjb3VudGVyUGx1cyIsImNvdW50ZXJNaW51cyIsImNvdW50ZXJNYXgiLCJwYXJzZUludCIsImdldEF0dHJpYnV0ZSIsImNvdW50ZXJNaW4iLCJ2YWx1ZSIsInNldEF0dHJpYnV0ZSIsImJ1cmdlciIsImhlYWRlciIsInZpZGVvIiwidmlkZW9QbGF5QnV0dG9uIiwidmlkZW9QcmV2aWV3Iiwic3R5bGUiLCJkaXNwbGF5IiwibW9kYWxUcmlnZ2VyIiwibW9kYWxXaW5kb3ciLCJ2YWxpZGF0aW9uRm9ybSIsInNldFRpbWVvdXQiLCJjbG9zZU9wZW5OYXZzIiwib3BlbkRyb3BzIiwib3BlbkRyb3Bkb3duIiwicGFyZW50RWxlbWVudCIsIkp1c3RWYWxpZGF0ZSIsImVycm9yRmllbGRDc3NDbGFzcyIsImVycm9yTGFiZWxDc3NDbGFzcyIsImxvY2tGb3JtIiwiZXJyb3JMYWJlbFN0eWxlIiwidGV4dERlY29yYXRpb24iLCJhZGRGaWVsZCIsInJ1bGUiLCJlcnJvck1lc3NhZ2UiLCJvblN1Y2Nlc3MiLCJwcmV2ZW50RGVmYXVsdCIsIndpbmRvdyIsImxvY2F0aW9uIiwiaHJlZiIsIkVsZW1lbnQiLCJwcm90b3R5cGUiLCJjbG9zZXN0IiwibWF0Y2hlcyIsIm1zTWF0Y2hlc1NlbGVjdG9yIiwid2Via2l0TWF0Y2hlc1NlbGVjdG9yIiwicyIsImFuY2VzdG9yIiwidGhpcyIsImRvY3VtZW50RWxlbWVudCIsImV2ZW50IiwidGFyZ2V0IiwiYmVuZWZpdHNTbGlkZXIiLCJwbGFuU2xpZGVyIiwiU3dpcGVyIiwibG9vcCIsInNsaWRlc1BlclZpZXciLCJzcGFjZUJldHdlZW4iLCJzcGVlZCIsImJyZWFrcG9pbnRzIiwiNzY4IiwiMTIwMCIsInBhZ2luYXRpb24iLCJlbCIsIm5hdmlnYXRpb24iLCJuZXh0RWwiLCJwcmV2RWwiLCJtYXRjaE1lZGlhIiwiT3ZlcmxheVNjcm9sbGJhcnMiXSwibWFwcGluZ3MiOiJhQUNBLElBQU1BLFdBQWEsV0FDakJDLFNBQVNDLEtBQUtDLFVBQVVDLE9BQU8sV0FDMUJILFNBQVNDLEtBQUtDLFVBQVVFLFNBQVMsWUFDcENKLFNBQVNDLEtBQUtJLGdCQUFnQixVQU85QkMsUUFBVU4sU0FBU08sY0FBYyxZQUNqQ0MsS0FBT1IsU0FBU08sY0FBYyxTQUVsQ0QsTUFBQUEsU0FBQUEsUUFBU0csaUJBQWlCLFFBQVMsV0FJakMsSUFIQSxJQUFJQyxFQUFpQlYsU0FBU1csaUJBQWlCLHNCQUMzQ0MsRUFBaUJaLFNBQVNXLGlCQUFpQixxQkFFdENFLEVBQUksRUFBR0EsRUFBSUgsRUFBZUksT0FBUUQsSUFDekNILEVBQWVHLEdBQUdYLFVBQVVhLE9BQU8sY0FFckMsSUFBSyxJQUFJRixFQUFJLEVBQUdBLEVBQUlELEVBQWVFLE9BQVFELElBQ3pDRCxFQUFlQyxHQUFHRSxTQUVwQkMsdUJBSUYsSUFBSUMsWUFBY2pCLFNBQVNXLGlCQUFpQixrQkFFNUNNLE1BQUFBLGFBQUFBLFlBQWFDLFFBQVEsU0FBQ0MsR0FDcEJBLEVBQUVWLGlCQUFpQixRQUFTLFdBQ3RCVSxFQUFFWixjQUFjLFNBQVNhLFFBQzNCRCxFQUFFakIsVUFBVW1CLElBQUksYUFFaEJGLEVBQUVqQixVQUFVYSxPQUFPLGlCQU16QixJQUFJTyxZQUFjdEIsU0FBU1csaUJBQWlCLGtCQUU1Q1csTUFBQUEsYUFBQUEsWUFBYUosUUFBUSxTQUFDQyxHQUNwQixJQUFJSSxFQUFlSixFQUFFWixjQUFjLG1CQUMvQmlCLEVBQWNMLEVBQUVaLGNBQWMsa0JBQzlCa0IsRUFBZU4sRUFBRVosY0FBYyxtQkFFL0JtQixFQUFhQyxTQUFTSixFQUFhSyxhQUFhLFFBQ2hEQyxFQUFhRixTQUFTSixFQUFhSyxhQUFhLFFBRXBESixFQUFZZixpQkFBaUIsUUFBUyxXQUNoQ2MsRUFBYU8sT0FBU0osRUFDeEJILEVBQWFPLE1BQVFKLEdBRXJCSCxFQUFhTyxRQUNiUCxFQUFhUSxhQUFhLFFBQVNSLEVBQWFPLFVBSXBETCxFQUFhaEIsaUJBQWlCLFFBQVMsV0FDakNjLEVBQWFPLE9BQVNELEVBQ3hCTixFQUFhTyxNQUFRRCxHQUVyQk4sRUFBYU8sUUFDYlAsRUFBYVEsYUFBYSxRQUFTUixFQUFhTyxVQUlwRFAsRUFBYWQsaUJBQWlCLFFBQVMsV0FDakNjLEVBQWFPLE9BQVNKLEVBQ3hCSCxFQUFhTyxNQUFRSixFQUNaSCxFQUFhTyxPQUFTRCxJQUMvQk4sRUFBYU8sTUFBUUQsT0FRM0IsSUFBSUcsT0FBU2hDLFNBQVNPLGNBQWMsV0FDaEMwQixPQUFTakMsU0FBU08sY0FBYyxXQUVwQ3lCLE9BQU92QixpQkFBaUIsUUFBUyxXQUMvQndCLE9BQU8vQixVQUFVQyxPQUFPLGVBQ3hCSixlQUlGLElBQUltQyxNQUFRbEMsU0FBU08sY0FBYyxnQkFDL0I0QixnQkFBa0JuQyxTQUFTTyxjQUFjLGdCQUN6QzZCLGFBQWVwQyxTQUFTTyxjQUFjLG1CQUUxQzRCLE1BQUFBLGlCQUFBQSxnQkFBaUIxQixpQkFBaUIsUUFBUyxXQUN6Q3lCLE1BQU1HLE1BQU1DLFFBQVUsUUFDdEJILGdCQUFnQkUsTUFBTUMsUUFBVSxTQUlsQyxJQUFJQyxhQUFldkMsU0FBU1csaUJBQWlCLGtCQUN6QzZCLFlBQWN4QyxTQUFTTyxjQUFjLFVBRXpDZ0MsTUFBQUEsY0FBQUEsYUFBY3JCLFFBQVEsU0FBQ0MsR0FDckJBLEVBQUVWLGlCQUFpQixRQUFTLFdBQzFCTyx5QkFJSixJQVdReUIsZUFYRnpCLG1CQUFxQixXQUN6QndCLFlBQVl0QyxVQUFVQyxPQUFPLFdBQzdCRyxRQUFRSixVQUFVQyxPQUFPLFdBQ3pCSixhQUNBMkMsV0FBWSxXQUNWRixZQUFZdEMsVUFBVWEsT0FBTyxjQUM1QixNQXlFTCxTQUFTNEIsZ0JBRVIsSUFEQyxJQUFJQyxFQUFZNUMsU0FBU1csaUJBQWlCLHNCQUNsQ0UsRUFBSSxFQUFHQSxFQUFJK0IsRUFBVTlCLE9BQVFELElBQUssQ0FDMUMsSUFBSWdDLEVBQWVELEVBQVUvQixHQUN6QmdDLEVBQWFDLGNBQWM1QyxVQUFVRSxTQUFTLFlBQ2hEeUMsRUFBYUMsY0FBYzVDLFVBQVVhLE9BQU8sWUExRTVDZixTQUFTTyxjQUFjLFlBQ25Ca0MsZUFBaUIsSUFBSU0sYUFBYSxRQUFTLENBQy9DQyxtQkFBb0IsYUFDcEJDLG1CQUFvQixtQkFDcEJDLFVBQVUsRUFDVkMsZ0JBQWlCLENBQ2ZDLGVBQWdCLGlCQUtqQkMsU0FBUyxhQUFjLENBQ3RCLENBQ0VDLEtBQU0sWUFDTnhCLE1BQU8sRUFDUHlCLGFBQWMsaUNBRWhCLENBQ0VELEtBQU0sV0FDTkMsYUFBYyxzQkFHakJGLFNBQVMsY0FBZSxDQUN2QixDQUNFQyxLQUFNLFdBQ05DLGFBQWMscUJBRWhCLENBQ0VELEtBQU0sUUFDTkMsYUFBYyxzQkFHakJDLFVBQVUsU0FBQ3JDLEdBQ1ZBLEVBQUVzQyxpQkFDRWpCLFlBQ0ZBLFlBQVl0QyxVQUFVbUIsSUFBSSxhQUUxQnFDLE9BQU9DLFNBQVNDLEtBQU8sZ0JBSXpCNUQsU0FBU08sY0FBYyxrQkFDekJrQyxlQUNHWSxTQUFTLGdCQUFpQixDQUMzQixDQUNFQyxLQUFNLFdBQ05DLGFBQWMsMEJBT2pCTSxRQUFRQyxVQUFVQyxVQUNqQkYsUUFBUUMsVUFBVUUsVUFDdEJILFFBQVFDLFVBQVVFLFFBQVVILFFBQVFDLFVBQVVHLG1CQUFxQkosUUFBUUMsVUFBVUksdUJBRXRGTCxRQUFRQyxVQUFVQyxRQUFVLFNBQVVJLEdBQ3JDLElBQ0lDLEVBQVdDLEtBQ2YsSUFBS3JFLFNBQVNzRSxnQkFBZ0JsRSxTQUZyQmlFLE1BRW1DLE9BQU8sS0FDbkQsR0FDQyxHQUFJRCxFQUFTSixRQUFRRyxHQUFJLE9BQU9DLFFBRVgsUUFEckJBLEVBQVdBLEVBQVN0QixnQkFFckIsT0FBTyxPQWNUOUMsU0FBU1MsaUJBQWlCLFFBQVMsU0FBVThELEdBQ3ZDQSxFQUFNQyxPQUFPVCxRQUFRLHNCQUdqQlEsRUFBTUMsT0FBT1QsUUFBUSx1QkFBeUJRLEVBQU1DLE9BQU8xQixjQUFjaUIsUUFBUSxZQUN6RlEsRUFBTUMsT0FBT1QsUUFBUSxzQkFBc0JqQixjQUFjNUMsVUFBVWEsT0FBTyxXQUVsRXdELEVBQU1DLE9BQU9ULFFBQVEsd0JBQzdCcEIsZ0JBQ0E0QixFQUFNQyxPQUFPVCxRQUFRLHNCQUFzQmpCLGNBQWM1QyxVQUFVbUIsSUFBSSxZQVB2RXNCLGtCQVVDLEdBR0gsSUE4QlE4QixlQTlCRkMsV0FBYSxJQUFJQyxPQUFPLGdCQUFpQixDQUM3Q0MsTUFBTSxFQUNOQyxjQUFlLEVBQ2ZDLGFBQWMsR0FDZEMsTUFBTyxJQUNQQyxZQUFhLENBQ1hDLElBQUssQ0FDSEosY0FBZSxHQUVqQkssS0FBTSxDQUNKTCxjQUFlLElBSW5CTSxXQUFZLENBQ1ZDLEdBQUkscUJBRU5DLFdBQVksQ0FDVkMsT0FBUSxxQkFDUkMsT0FBUSx3QkFJUjdCLE9BQU84QixXQUFXLHNCQUFzQnhCLFFBRTFDaEUsU0FBU1MsaUJBQWlCLG1CQUFvQixXQUM1Q2dGLGtCQUFrQnpGLFNBQVNXLGlCQUFpQixRQUFTLE1BSWpEOEQsZUFBaUIsSUFBSUUsT0FBTyxvQkFBcUIsQ0FDckRDLE1BQU0sRUFDTkMsY0FBZSxFQUNmQyxhQUFjLEdBQ2RDLE1BQU8sSUFDUEMsWUFBYSxDQUNYQyxJQUFLLENBQ0hKLGNBQWUsSUFJbkJNLFdBQVksQ0FDVkMsR0FBSSx5QkFFTkMsV0FBWSxDQUNWQyxPQUFRLHlCQUNSQyxPQUFRIiwiZmlsZSI6Im1haW4ubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8gTG9jayBzY3JvbGwgb24gYm9keVxyXG5jb25zdCBsb2NrU2Nyb2xsID0gKCkgPT4ge1xyXG4gIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LnRvZ2dsZShcImpzLWxvY2tcIik7XHJcbiAgaWYgKCFkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5jb250YWlucyhcImpzLWxvY2tcIikpIHtcclxuICAgIGRvY3VtZW50LmJvZHkudG9nZ2xlQXR0cmlidXRlKFwiY2xhc3NcIik7XHJcbiAgfSBlbHNlIHtcclxuICAgIG51bGxcclxuICB9XHJcbn07XHJcblxyXG4vLyBDbGljayBvbiBvdmVybGF5XHJcbmxldCBvdmVybGF5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5vdmVybGF5XCIpO1xyXG5sZXQgZm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZm9ybVwiKTtcclxuXHJcbm92ZXJsYXk/LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgbGV0IGZvcm1GaWVsZElucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5mb3JtX19maWVsZCBpbnB1dFwiKTtcclxuICBsZXQgZm9ybUZpZWxkTGFiZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmpzLWludmFsaWQtbGFiZWxcIik7XHJcblxyXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgZm9ybUZpZWxkSW5wdXQubGVuZ3RoOyBpKyspe1xyXG4gICAgZm9ybUZpZWxkSW5wdXRbaV0uY2xhc3NMaXN0LnJlbW92ZSgnanMtaW52YWxpZCcpO1xyXG4gIH1cclxuICBmb3IgKGxldCBpID0gMDsgaSA8IGZvcm1GaWVsZExhYmVsLmxlbmd0aDsgaSsrKXtcclxuICAgIGZvcm1GaWVsZExhYmVsW2ldLnJlbW92ZSgpO1xyXG4gIH1cclxuICBtb2RhbFRvZ2dsZVZpc2libGUoKVxyXG59KTtcclxuXHJcbi8vIEN1c3RvbSBzd2l0Y2ggYnV0dG9uXHJcbmxldCBzd2l0Y2hMYWJlbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuc3dpdGNoX19sYWJlbFwiKTtcclxuXHJcbnN3aXRjaExhYmVsPy5mb3JFYWNoKChlKSA9PiB7XHJcbiAgZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgaWYgKGUucXVlcnlTZWxlY3RvcihcImlucHV0XCIpLmNoZWNrZWQpIHtcclxuICAgICAgZS5jbGFzc0xpc3QuYWRkKFwianMtdG9nZ2xlXCIpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgZS5jbGFzc0xpc3QucmVtb3ZlKFwianMtdG9nZ2xlXCIpO1xyXG4gICAgfVxyXG4gIH0pXHJcbn0pO1xyXG5cclxuLy8gQ3VzdG9tIGNvdW50ZXJcclxubGV0IGNvdW50ZXJJdGVtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5jb3VudGVyX19pdGVtXCIpO1xyXG5cclxuY291bnRlckl0ZW0/LmZvckVhY2goKGUpID0+IHtcclxuICBsZXQgY291bnRlcklucHV0ID0gZS5xdWVyeVNlbGVjdG9yKFwiLmNvdW50ZXJfX2lucHV0XCIpO1xyXG4gIGxldCBjb3VudGVyUGx1cyA9IGUucXVlcnlTZWxlY3RvcihcIi5jb3VudGVyX19wbHVzXCIpO1xyXG4gIGxldCBjb3VudGVyTWludXMgPSBlLnF1ZXJ5U2VsZWN0b3IoXCIuY291bnRlcl9fbWludXNcIik7XHJcblxyXG4gIGxldCBjb3VudGVyTWF4ID0gcGFyc2VJbnQoY291bnRlcklucHV0LmdldEF0dHJpYnV0ZShcIm1heFwiKSk7XHJcbiAgbGV0IGNvdW50ZXJNaW4gPSBwYXJzZUludChjb3VudGVySW5wdXQuZ2V0QXR0cmlidXRlKFwibWluXCIpKTtcclxuXHJcbiAgY291bnRlclBsdXMuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgIGlmIChjb3VudGVySW5wdXQudmFsdWUgPj0gY291bnRlck1heCApIHtcclxuICAgICAgY291bnRlcklucHV0LnZhbHVlID0gY291bnRlck1heDtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGNvdW50ZXJJbnB1dC52YWx1ZSsrXHJcbiAgICAgIGNvdW50ZXJJbnB1dC5zZXRBdHRyaWJ1dGUoXCJ2YWx1ZVwiLCBjb3VudGVySW5wdXQudmFsdWUpO1xyXG4gICAgfVxyXG4gIH0pO1xyXG4gIFxyXG4gIGNvdW50ZXJNaW51cy5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgaWYgKGNvdW50ZXJJbnB1dC52YWx1ZSA8PSBjb3VudGVyTWluICkge1xyXG4gICAgICBjb3VudGVySW5wdXQudmFsdWUgPSBjb3VudGVyTWluO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgY291bnRlcklucHV0LnZhbHVlLS1cclxuICAgICAgY291bnRlcklucHV0LnNldEF0dHJpYnV0ZShcInZhbHVlXCIsIGNvdW50ZXJJbnB1dC52YWx1ZSk7XHJcbiAgICB9XHJcbiAgfSk7XHJcblxyXG4gIGNvdW50ZXJJbnB1dC5hZGRFdmVudExpc3RlbmVyKFwia2V5dXBcIiwgKCkgPT4ge1xyXG4gICAgaWYgKGNvdW50ZXJJbnB1dC52YWx1ZSA+PSBjb3VudGVyTWF4KSB7XHJcbiAgICAgIGNvdW50ZXJJbnB1dC52YWx1ZSA9IGNvdW50ZXJNYXg7XHJcbiAgICB9IGVsc2UgaWYgKGNvdW50ZXJJbnB1dC52YWx1ZSA8PSBjb3VudGVyTWluKSB7XHJcbiAgICAgIGNvdW50ZXJJbnB1dC52YWx1ZSA9IGNvdW50ZXJNaW47XHJcbiAgICB9IGVsc2UgIHtcclxuICAgICAgbnVsbFxyXG4gICAgfVxyXG4gIH0pO1xyXG59KTtcclxuXHJcbi8vIE9wZW4gbWVudSBvbiBjbGljayB0byBCdXJnZXJcclxubGV0IGJ1cmdlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYnVyZ2VyXCIpO1xyXG5sZXQgaGVhZGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5oZWFkZXJcIik7XHJcblxyXG5idXJnZXIuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBoZWFkZXIuY2xhc3NMaXN0LnRvZ2dsZShcImpzLW5hdi1vcGVuXCIpO1xyXG4gIGxvY2tTY3JvbGwoKTtcclxufSk7XHJcblxyXG4vLyBWaWRlb1xyXG5sZXQgdmlkZW8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnZpZGVvX19pdGVtXCIpO1xyXG5sZXQgdmlkZW9QbGF5QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi52aWRlb19fcGxheVwiKTtcclxubGV0IHZpZGVvUHJldmlldyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudmlkZW9fX3ByZXZpZXdcIik7XHJcblxyXG52aWRlb1BsYXlCdXR0b24/LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgdmlkZW8uc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcclxuICB2aWRlb1BsYXlCdXR0b24uc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xyXG59KTtcclxuXHJcbi8vIE1vZGFsXHJcbmxldCBtb2RhbFRyaWdnZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLm1vZGFsLXRyaWdnZXJcIik7XHJcbmxldCBtb2RhbFdpbmRvdyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxcIik7XHJcblxyXG5tb2RhbFRyaWdnZXI/LmZvckVhY2goKGUpID0+IHtcclxuICBlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICBtb2RhbFRvZ2dsZVZpc2libGUoKTtcclxuICB9KTtcclxufSk7XHJcblxyXG5jb25zdCBtb2RhbFRvZ2dsZVZpc2libGUgPSAoKSA9PiB7XHJcbiAgbW9kYWxXaW5kb3cuY2xhc3NMaXN0LnRvZ2dsZShcImpzLXNob3dcIik7XHJcbiAgb3ZlcmxheS5jbGFzc0xpc3QudG9nZ2xlKFwianMtc2hvd1wiKTtcclxuICBsb2NrU2Nyb2xsKCk7XHJcbiAgc2V0VGltZW91dCggKCkgPT4ge1xyXG4gICAgbW9kYWxXaW5kb3cuY2xhc3NMaXN0LnJlbW92ZShcImpzLXN1Ym1pdFwiKTtcclxuICB9LCAzMDApO1xyXG59O1xyXG5cclxuLy8gVmFsaWRhdGUgZm9ybVxyXG5pZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNmb3JtXCIpKSB7XHJcbiAgY29uc3QgdmFsaWRhdGlvbkZvcm0gPSBuZXcgSnVzdFZhbGlkYXRlKFwiI2Zvcm1cIiwge1xyXG4gICAgZXJyb3JGaWVsZENzc0NsYXNzOiBcImpzLWludmFsaWRcIixcclxuICAgIGVycm9yTGFiZWxDc3NDbGFzczogXCJqcy1pbnZhbGlkLWxhYmVsXCIsXHJcbiAgICBsb2NrRm9ybTogdHJ1ZSxcclxuICAgIGVycm9yTGFiZWxTdHlsZToge1xyXG4gICAgICB0ZXh0RGVjb3JhdGlvbjogXCJ1bmRlcmxpbmVkXCIsXHJcbiAgICB9LFxyXG4gIH0pO1xyXG5cclxuICB2YWxpZGF0aW9uRm9ybVxyXG4gICAgLmFkZEZpZWxkKFwiI3VzZXJfbmFtZVwiLCBbXHJcbiAgICAgIHtcclxuICAgICAgICBydWxlOiBcIm1pbkxlbmd0aFwiLFxyXG4gICAgICAgIHZhbHVlOiAzLFxyXG4gICAgICAgIGVycm9yTWVzc2FnZTogXCJNaW5pbXVtIDMgY2hhcmFjdGVycyByZXF1aXJlZFwiLFxyXG4gICAgICB9LFxyXG4gICAgICB7XHJcbiAgICAgICAgcnVsZTogXCJyZXF1aXJlZFwiLFxyXG4gICAgICAgIGVycm9yTWVzc2FnZTogXCJOYW1lIGlzIHJlcXVpcmVkXCIsXHJcbiAgICAgIH0sXHJcbiAgICBdKVxyXG4gICAgLmFkZEZpZWxkKFwiI3VzZXJfZW1haWxcIiwgW1xyXG4gICAgICB7XHJcbiAgICAgICAgcnVsZTogXCJyZXF1aXJlZFwiLFxyXG4gICAgICAgIGVycm9yTWVzc2FnZTogXCJFbWFpbCBpcyByZXF1aXJlZFwiLFxyXG4gICAgICB9LFxyXG4gICAgICB7XHJcbiAgICAgICAgcnVsZTogXCJlbWFpbFwiLFxyXG4gICAgICAgIGVycm9yTWVzc2FnZTogXCJFbWFpbCBpcyBpbnZhbGlkXCIsXHJcbiAgICAgIH0sXHJcbiAgICBdKVxyXG4gICAgLm9uU3VjY2VzcygoZSkgPT4ge1xyXG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIGlmIChtb2RhbFdpbmRvdykge1xyXG4gICAgICAgIG1vZGFsV2luZG93LmNsYXNzTGlzdC5hZGQoXCJqcy1zdWJtaXRcIilcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9ICd0aGFua3MuaHRtbCc7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIFxyXG4gIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3VzZXJfY29tcGFueVwiKSkge1xyXG4gICAgdmFsaWRhdGlvbkZvcm1cclxuICAgICAgLmFkZEZpZWxkKFwiI3VzZXJfY29tcGFueVwiLCBbXHJcbiAgICAgIHtcclxuICAgICAgICBydWxlOiBcInJlcXVpcmVkXCIsIFxyXG4gICAgICAgIGVycm9yTWVzc2FnZTogXCJDb21wYW55IGlzIHJlcXVpcmVkXCIsXHJcbiAgICAgIH0sXHJcbiAgICBdKVxyXG4gIH07XHJcbn07XHJcblxyXG4vLyBEcm9wZG93blwic1xyXG5pZiAoIUVsZW1lbnQucHJvdG90eXBlLmNsb3Nlc3QpIHtcclxuXHRpZiAoIUVsZW1lbnQucHJvdG90eXBlLm1hdGNoZXMpIHtcclxuXHRcdEVsZW1lbnQucHJvdG90eXBlLm1hdGNoZXMgPSBFbGVtZW50LnByb3RvdHlwZS5tc01hdGNoZXNTZWxlY3RvciB8fCBFbGVtZW50LnByb3RvdHlwZS53ZWJraXRNYXRjaGVzU2VsZWN0b3I7XHJcblx0fTtcclxuXHRFbGVtZW50LnByb3RvdHlwZS5jbG9zZXN0ID0gZnVuY3Rpb24gKHMpIHtcclxuXHRcdHZhciBlbCA9IHRoaXM7XHJcblx0XHR2YXIgYW5jZXN0b3IgPSB0aGlzO1xyXG5cdFx0aWYgKCFkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY29udGFpbnMoZWwpKSByZXR1cm4gbnVsbDtcclxuXHRcdGRvIHtcclxuXHRcdFx0aWYgKGFuY2VzdG9yLm1hdGNoZXMocykpIHJldHVybiBhbmNlc3RvcjtcclxuXHRcdFx0YW5jZXN0b3IgPSBhbmNlc3Rvci5wYXJlbnRFbGVtZW50O1xyXG5cdFx0fSB3aGlsZSAoYW5jZXN0b3IgIT09IG51bGwpO1xyXG5cdFx0cmV0dXJuIG51bGw7XHJcblx0fTtcclxufTtcclxuXHJcbmZ1bmN0aW9uIGNsb3NlT3Blbk5hdnMoKSB7XHJcbiAgdmFyIG9wZW5Ecm9wcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuZHJvcGRvd25fX3RyaWdnZXJcIik7XHJcblx0Zm9yICh2YXIgaSA9IDA7IGkgPCBvcGVuRHJvcHMubGVuZ3RoOyBpKyspIHtcclxuXHRcdHZhciBvcGVuRHJvcGRvd24gPSBvcGVuRHJvcHNbaV07XHJcblx0XHRpZiAob3BlbkRyb3Bkb3duLnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKFwianMtb3BlblwiKSkge1xyXG5cdFx0ICBvcGVuRHJvcGRvd24ucGFyZW50RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwianMtb3BlblwiKTtcclxuXHRcdH07XHJcblx0fTtcclxufTtcclxuXHJcbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoZXZlbnQpIHtcclxuXHRpZiAoIWV2ZW50LnRhcmdldC5jbG9zZXN0KFwiLmRyb3Bkb3duX190cmlnZ2VyXCIpKXtcclxuXHRcdGNsb3NlT3Blbk5hdnMoKTtcclxuXHR9IFxyXG5cdGVsc2UgaWYgKGV2ZW50LnRhcmdldC5jbG9zZXN0KFwiLmRyb3Bkb3duX190cmlnZ2VyXCIpICYmIGV2ZW50LnRhcmdldC5wYXJlbnRFbGVtZW50LmNsb3Nlc3QoXCIuanMtb3BlblwiKSl7XHJcblx0XHRldmVudC50YXJnZXQuY2xvc2VzdChcIi5kcm9wZG93bl9fdHJpZ2dlclwiKS5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJqcy1vcGVuXCIpO1xyXG5cdH1cclxuXHRlbHNlIGlmIChldmVudC50YXJnZXQuY2xvc2VzdChcIi5kcm9wZG93bl9fdHJpZ2dlclwiKSl7XHJcblx0XHRjbG9zZU9wZW5OYXZzKCk7XHJcblx0XHRldmVudC50YXJnZXQuY2xvc2VzdChcIi5kcm9wZG93bl9fdHJpZ2dlclwiKS5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJqcy1vcGVuXCIpO1xyXG5cdH1cclxuXHRcclxufSwgZmFsc2UpO1xyXG5cclxuLy8gUGxhbiBzbGlkZXJcclxuY29uc3QgcGxhblNsaWRlciA9IG5ldyBTd2lwZXIoXCIucGxhbl9fc2xpZGVyXCIsIHtcclxuICBsb29wOiBmYWxzZSxcclxuICBzbGlkZXNQZXJWaWV3OiAxLFxyXG4gIHNwYWNlQmV0d2VlbjogMzAsXHJcbiAgc3BlZWQ6IDMwMCxcclxuICBicmVha3BvaW50czoge1xyXG4gICAgNzY4OiB7XHJcbiAgICAgIHNsaWRlc1BlclZpZXc6IDIsXHJcbiAgICB9LFxyXG4gICAgMTIwMDoge1xyXG4gICAgICBzbGlkZXNQZXJWaWV3OiAzLFxyXG4gICAgfSxcclxuICB9LFxyXG5cclxuICBwYWdpbmF0aW9uOiB7XHJcbiAgICBlbDogXCIucGxhbl9fcGFnaW5hdGlvblwiLFxyXG4gIH0sXHJcbiAgbmF2aWdhdGlvbjoge1xyXG4gICAgbmV4dEVsOiBcIi5wbGFuX19idXR0b24tbmV4dFwiLFxyXG4gICAgcHJldkVsOiBcIi5wbGFuX19idXR0b24tcHJldlwiLFxyXG4gIH0sXHJcbn0pO1xyXG5cclxuaWYgKHdpbmRvdy5tYXRjaE1lZGlhKFwiKG1pbi13aWR0aDogOTkycHgpXCIpLm1hdGNoZXMpIHtcclxuICAvLyBDdXN0b20gc2Nyb2xsYmFyXHJcbiAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIiwgZnVuY3Rpb24oKSB7XHJcbiAgICBPdmVybGF5U2Nyb2xsYmFycyhkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiYm9keVwiKSwgeyB9KTtcclxuICB9KTtcclxufSBlbHNlIHtcclxuICAvLyBCZW5lZml0cyBzbGlkZXJcclxuICBjb25zdCBiZW5lZml0c1NsaWRlciA9IG5ldyBTd2lwZXIoXCIuYmVuZWZpdHNfX3NsaWRlclwiLCB7XHJcbiAgICBsb29wOiBmYWxzZSxcclxuICAgIHNsaWRlc1BlclZpZXc6IDEsXHJcbiAgICBzcGFjZUJldHdlZW46IDMwLFxyXG4gICAgc3BlZWQ6IDMwMCxcclxuICAgIGJyZWFrcG9pbnRzOiB7XHJcbiAgICAgIDc2ODoge1xyXG4gICAgICAgIHNsaWRlc1BlclZpZXc6IDIsXHJcbiAgICAgIH0sXHJcbiAgICB9LFxyXG5cclxuICAgIHBhZ2luYXRpb246IHtcclxuICAgICAgZWw6IFwiLmJlbmVmaXRzX19wYWdpbmF0aW9uXCIsXHJcbiAgICB9LFxyXG4gICAgbmF2aWdhdGlvbjoge1xyXG4gICAgICBuZXh0RWw6IFwiLmJlbmVmaXRzX19idXR0b24tbmV4dFwiLFxyXG4gICAgICBwcmV2RWw6IFwiLmJlbmVmaXRzX19idXR0b24tcHJldlwiLFxyXG4gICAgfSxcclxuICB9KTtcclxufTsiXX0=