"use strict";var lockScroll=function(){document.body.classList.toggle("js-lock"),document.body.classList.contains("js-lock")||document.body.toggleAttribute("class")},overlay=document.querySelector(".overlay"),form=document.querySelector("#form");null!=overlay&&overlay.addEventListener("click",function(){for(var e=document.querySelectorAll(".form__field input"),t=document.querySelectorAll(".js-invalid-label"),r=0;r<e.length;r++)e[r].classList.remove("js-invalid");for(var o=0;o<t.length;o++)t[o].remove();modalToggleVisible()});var switchLabel=document.querySelectorAll(".switch__label");null!=switchLabel&&switchLabel.forEach(function(e){e.addEventListener("click",function(){e.querySelector("input").checked?e.classList.add("js-toggle"):e.classList.remove("js-toggle")})});var counterItem=document.querySelectorAll(".counter__item");null!=counterItem&&counterItem.forEach(function(e){var t=e.querySelector(".counter__input"),r=e.querySelector(".counter__plus"),e=e.querySelector(".counter__minus"),o=parseInt(t.getAttribute("max")),l=parseInt(t.getAttribute("min"));r.addEventListener("click",function(){t.value>=o?t.value=o:(t.value++,t.setAttribute("value",t.value))}),e.addEventListener("click",function(){t.value<=l?t.value=l:(t.value--,t.setAttribute("value",t.value))}),t.addEventListener("keyup",function(){t.value>=o?t.value=o:t.value<=l&&(t.value=l)})});var burger=document.querySelector(".burger"),header=document.querySelector(".header");burger.addEventListener("click",function(){header.classList.toggle("js-nav-open"),lockScroll()});var video=document.querySelector(".video__item"),videoPlayButton=document.querySelector(".video__play"),videoPreview=document.querySelector(".video__preview");null!=videoPlayButton&&videoPlayButton.addEventListener("click",function(){video.style.display="block",videoPlayButton.style.display="none"});var modalTrigger=document.querySelectorAll(".modal-trigger"),modalWindow=document.querySelector(".modal");null!=modalTrigger&&modalTrigger.forEach(function(e){e.addEventListener("click",function(){modalToggleVisible()})});var validationForm,modalToggleVisible=function(){modalWindow.classList.toggle("js-show"),overlay.classList.toggle("js-show"),lockScroll(),setTimeout(function(){modalWindow.classList.remove("js-submit")},300)};function closeOpenNavs(){for(var e=document.querySelectorAll(".dropdown__trigger"),t=0;t<e.length;t++){var r=e[t];r.parentElement.classList.contains("js-open")&&r.parentElement.classList.remove("js-open")}}document.querySelector("#form")&&((validationForm=new JustValidate("#form",{errorFieldCssClass:"js-invalid",errorLabelCssClass:"js-invalid-label",lockForm:!0,errorLabelStyle:{textDecoration:"underlined"}})).addField("#user_name",[{rule:"minLength",value:3,errorMessage:"Minimum 3 characters required"},{rule:"required",errorMessage:"Name is required"}]).addField("#user_email",[{rule:"required",errorMessage:"Email is required"},{rule:"email",errorMessage:"Email is invalid"}]).onSuccess(function(e){e.preventDefault(),modalWindow?modalWindow.classList.add("js-submit"):window.location.href="thanks.html"}),document.querySelector("#user_company")&&validationForm.addField("#user_company",[{rule:"required",errorMessage:"Company is required"}])),Element.prototype.closest||(Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest=function(e){var t=this;if(!document.documentElement.contains(this))return null;do{if(t.matches(e))return t}while(null!==(t=t.parentElement));return null}),document.addEventListener("click",function(e){e.target.closest(".dropdown__trigger")?e.target.closest(".dropdown__trigger")&&e.target.parentElement.closest(".js-open")?e.target.closest(".dropdown__trigger").parentElement.classList.remove("js-open"):e.target.closest(".dropdown__trigger")&&(closeOpenNavs(),e.target.closest(".dropdown__trigger").parentElement.classList.add("js-open")):closeOpenNavs()},!1);var fixedElem,scrollbar,options,benefitsSlider,planSlider=new Swiper(".plan__slider",{loop:!1,slidesPerView:1,spaceBetween:30,speed:300,breakpoints:{768:{slidesPerView:2},1200:{slidesPerView:3}},pagination:{el:".plan__pagination"},navigation:{nextEl:".plan__button-next",prevEl:".plan__button-prev"}});window.matchMedia("(min-width: 992px)").matches?(fixedElem=document.querySelector(".fixed-scroll"),scrollbar=Scrollbar.init(document.querySelector(".scroll-container"),options),options={damping:.1},scrollbar.addListener(function(e){e=e.offset;fixedElem.style.top=e.y+"px",fixedElem.style.left=e.x+"px"})):benefitsSlider=new Swiper(".benefits__slider",{loop:!1,slidesPerView:1,spaceBetween:30,speed:300,breakpoints:{768:{slidesPerView:2}},pagination:{el:".benefits__pagination"},navigation:{nextEl:".benefits__button-next",prevEl:".benefits__button-prev"}});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsibG9ja1Njcm9sbCIsImRvY3VtZW50IiwiYm9keSIsImNsYXNzTGlzdCIsInRvZ2dsZSIsImNvbnRhaW5zIiwidG9nZ2xlQXR0cmlidXRlIiwib3ZlcmxheSIsInF1ZXJ5U2VsZWN0b3IiLCJmb3JtIiwiYWRkRXZlbnRMaXN0ZW5lciIsImZvcm1GaWVsZElucHV0IiwicXVlcnlTZWxlY3RvckFsbCIsImZvcm1GaWVsZExhYmVsIiwiaSIsImxlbmd0aCIsInJlbW92ZSIsIm1vZGFsVG9nZ2xlVmlzaWJsZSIsInN3aXRjaExhYmVsIiwiZm9yRWFjaCIsImUiLCJjaGVja2VkIiwiYWRkIiwiY291bnRlckl0ZW0iLCJjb3VudGVySW5wdXQiLCJjb3VudGVyUGx1cyIsImNvdW50ZXJNaW51cyIsImNvdW50ZXJNYXgiLCJwYXJzZUludCIsImdldEF0dHJpYnV0ZSIsImNvdW50ZXJNaW4iLCJ2YWx1ZSIsInNldEF0dHJpYnV0ZSIsImJ1cmdlciIsImhlYWRlciIsInZpZGVvIiwidmlkZW9QbGF5QnV0dG9uIiwidmlkZW9QcmV2aWV3Iiwic3R5bGUiLCJkaXNwbGF5IiwibW9kYWxUcmlnZ2VyIiwibW9kYWxXaW5kb3ciLCJ2YWxpZGF0aW9uRm9ybSIsInNldFRpbWVvdXQiLCJjbG9zZU9wZW5OYXZzIiwib3BlbkRyb3BzIiwib3BlbkRyb3Bkb3duIiwicGFyZW50RWxlbWVudCIsIkp1c3RWYWxpZGF0ZSIsImVycm9yRmllbGRDc3NDbGFzcyIsImVycm9yTGFiZWxDc3NDbGFzcyIsImxvY2tGb3JtIiwiZXJyb3JMYWJlbFN0eWxlIiwidGV4dERlY29yYXRpb24iLCJhZGRGaWVsZCIsInJ1bGUiLCJlcnJvck1lc3NhZ2UiLCJvblN1Y2Nlc3MiLCJwcmV2ZW50RGVmYXVsdCIsIndpbmRvdyIsImxvY2F0aW9uIiwiaHJlZiIsIkVsZW1lbnQiLCJwcm90b3R5cGUiLCJjbG9zZXN0IiwibWF0Y2hlcyIsIm1zTWF0Y2hlc1NlbGVjdG9yIiwid2Via2l0TWF0Y2hlc1NlbGVjdG9yIiwicyIsImFuY2VzdG9yIiwidGhpcyIsImRvY3VtZW50RWxlbWVudCIsImV2ZW50IiwidGFyZ2V0IiwiZml4ZWRFbGVtIiwic2Nyb2xsYmFyIiwib3B0aW9ucyIsImJlbmVmaXRzU2xpZGVyIiwicGxhblNsaWRlciIsIlN3aXBlciIsImxvb3AiLCJzbGlkZXNQZXJWaWV3Iiwic3BhY2VCZXR3ZWVuIiwic3BlZWQiLCJicmVha3BvaW50cyIsIjc2OCIsIjEyMDAiLCJwYWdpbmF0aW9uIiwiZWwiLCJuYXZpZ2F0aW9uIiwibmV4dEVsIiwicHJldkVsIiwibWF0Y2hNZWRpYSIsIlNjcm9sbGJhciIsImluaXQiLCJkYW1waW5nIiwiYWRkTGlzdGVuZXIiLCJzdGF0dXMiLCJvZmZzZXQiLCJ0b3AiLCJ5IiwibGVmdCIsIngiXSwibWFwcGluZ3MiOiJhQUNBLElBQU1BLFdBQWEsV0FDakJDLFNBQVNDLEtBQUtDLFVBQVVDLE9BQU8sV0FDMUJILFNBQVNDLEtBQUtDLFVBQVVFLFNBQVMsWUFDcENKLFNBQVNDLEtBQUtJLGdCQUFnQixVQU85QkMsUUFBVU4sU0FBU08sY0FBYyxZQUNqQ0MsS0FBT1IsU0FBU08sY0FBYyxTQUVsQ0QsTUFBQUEsU0FBQUEsUUFBU0csaUJBQWlCLFFBQVMsV0FJakMsSUFIQSxJQUFJQyxFQUFpQlYsU0FBU1csaUJBQWlCLHNCQUMzQ0MsRUFBaUJaLFNBQVNXLGlCQUFpQixxQkFFdENFLEVBQUksRUFBR0EsRUFBSUgsRUFBZUksT0FBUUQsSUFDekNILEVBQWVHLEdBQUdYLFVBQVVhLE9BQU8sY0FFckMsSUFBSyxJQUFJRixFQUFJLEVBQUdBLEVBQUlELEVBQWVFLE9BQVFELElBQ3pDRCxFQUFlQyxHQUFHRSxTQUVwQkMsdUJBSUYsSUFBSUMsWUFBY2pCLFNBQVNXLGlCQUFpQixrQkFFNUNNLE1BQUFBLGFBQUFBLFlBQWFDLFFBQVEsU0FBQ0MsR0FDcEJBLEVBQUVWLGlCQUFpQixRQUFTLFdBQ3RCVSxFQUFFWixjQUFjLFNBQVNhLFFBQzNCRCxF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RUFBT0UsRUFBSSxLQUNqQzFCLFVBQVVwQyxNQUFNK0QsS0FBT0gsRUFBT0ksRUFBSSxRQUk5QnpCLGVBQWlCLElBQUlFLE9BQU8sb0JBQXFCLENBQ3JEQyxNQUFNLEVBQ05DLGNBQWUsRUFDZkMsYUFBYyxHQUNkQyxNQUFPLElBQ1BDLFlBQWEsQ0FDWEMsSUFBSyxDQUNISixjQUFlLElBSW5CTSxXQUFZLENBQ1ZDLEdBQUkseUJBRU5DLFdBQVksQ0FDVkMsT0FBUSx5QkFDUkMsT0FBUSIsImZpbGUiOiJtYWluLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vIExvY2sgc2Nyb2xsIG9uIGJvZHlcclxuY29uc3QgbG9ja1Njcm9sbCA9ICgpID0+IHtcclxuICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC50b2dnbGUoXCJqcy1sb2NrXCIpO1xyXG4gIGlmICghZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuY29udGFpbnMoXCJqcy1sb2NrXCIpKSB7XHJcbiAgICBkb2N1bWVudC5ib2R5LnRvZ2dsZUF0dHJpYnV0ZShcImNsYXNzXCIpO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBudWxsXHJcbiAgfVxyXG59O1xyXG5cclxuLy8gQ2xpY2sgb24gb3ZlcmxheVxyXG5sZXQgb3ZlcmxheSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIub3ZlcmxheVwiKTtcclxubGV0IGZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2Zvcm1cIik7XHJcblxyXG5vdmVybGF5Py5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIGxldCBmb3JtRmllbGRJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuZm9ybV9fZmllbGQgaW5wdXRcIik7XHJcbiAgbGV0IGZvcm1GaWVsZExhYmVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5qcy1pbnZhbGlkLWxhYmVsXCIpO1xyXG5cclxuICBmb3IgKGxldCBpID0gMDsgaSA8IGZvcm1GaWVsZElucHV0Lmxlbmd0aDsgaSsrKXtcclxuICAgIGZvcm1GaWVsZElucHV0W2ldLmNsYXNzTGlzdC5yZW1vdmUoJ2pzLWludmFsaWQnKTtcclxuICB9XHJcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBmb3JtRmllbGRMYWJlbC5sZW5ndGg7IGkrKyl7XHJcbiAgICBmb3JtRmllbGRMYWJlbFtpXS5yZW1vdmUoKTtcclxuICB9XHJcbiAgbW9kYWxUb2dnbGVWaXNpYmxlKClcclxufSk7XHJcblxyXG4vLyBDdXN0b20gc3dpdGNoIGJ1dHRvblxyXG5sZXQgc3dpdGNoTGFiZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnN3aXRjaF9fbGFiZWxcIik7XHJcblxyXG5zd2l0Y2hMYWJlbD8uZm9yRWFjaCgoZSkgPT4ge1xyXG4gIGUuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgIGlmIChlLnF1ZXJ5U2VsZWN0b3IoXCJpbnB1dFwiKS5jaGVja2VkKSB7XHJcbiAgICAgIGUuY2xhc3NMaXN0LmFkZChcImpzLXRvZ2dsZVwiKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGUuY2xhc3NMaXN0LnJlbW92ZShcImpzLXRvZ2dsZVwiKTtcclxuICAgIH1cclxuICB9KVxyXG59KTtcclxuXHJcbi8vIEN1c3RvbSBjb3VudGVyXHJcbmxldCBjb3VudGVySXRlbSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuY291bnRlcl9faXRlbVwiKTtcclxuXHJcbmNvdW50ZXJJdGVtPy5mb3JFYWNoKChlKSA9PiB7XHJcbiAgbGV0IGNvdW50ZXJJbnB1dCA9IGUucXVlcnlTZWxlY3RvcihcIi5jb3VudGVyX19pbnB1dFwiKTtcclxuICBsZXQgY291bnRlclBsdXMgPSBlLnF1ZXJ5U2VsZWN0b3IoXCIuY291bnRlcl9fcGx1c1wiKTtcclxuICBsZXQgY291bnRlck1pbnVzID0gZS5xdWVyeVNlbGVjdG9yKFwiLmNvdW50ZXJfX21pbnVzXCIpO1xyXG5cclxuICBsZXQgY291bnRlck1heCA9IHBhcnNlSW50KGNvdW50ZXJJbnB1dC5nZXRBdHRyaWJ1dGUoXCJtYXhcIikpO1xyXG4gIGxldCBjb3VudGVyTWluID0gcGFyc2VJbnQoY291bnRlcklucHV0LmdldEF0dHJpYnV0ZShcIm1pblwiKSk7XHJcblxyXG4gIGNvdW50ZXJQbHVzLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICBpZiAoY291bnRlcklucHV0LnZhbHVlID49IGNvdW50ZXJNYXggKSB7XHJcbiAgICAgIGNvdW50ZXJJbnB1dC52YWx1ZSA9IGNvdW50ZXJNYXg7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjb3VudGVySW5wdXQudmFsdWUrK1xyXG4gICAgICBjb3VudGVySW5wdXQuc2V0QXR0cmlidXRlKFwidmFsdWVcIiwgY291bnRlcklucHV0LnZhbHVlKTtcclxuICAgIH1cclxuICB9KTtcclxuICBcclxuICBjb3VudGVyTWludXMuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgIGlmIChjb3VudGVySW5wdXQudmFsdWUgPD0gY291bnRlck1pbiApIHtcclxuICAgICAgY291bnRlcklucHV0LnZhbHVlID0gY291bnRlck1pbjtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGNvdW50ZXJJbnB1dC52YWx1ZS0tXHJcbiAgICAgIGNvdW50ZXJJbnB1dC5zZXRBdHRyaWJ1dGUoXCJ2YWx1ZVwiLCBjb3VudGVySW5wdXQudmFsdWUpO1xyXG4gICAgfVxyXG4gIH0pO1xyXG5cclxuICBjb3VudGVySW5wdXQuYWRkRXZlbnRMaXN0ZW5lcihcImtleXVwXCIsICgpID0+IHtcclxuICAgIGlmIChjb3VudGVySW5wdXQudmFsdWUgPj0gY291bnRlck1heCkge1xyXG4gICAgICBjb3VudGVySW5wdXQudmFsdWUgPSBjb3VudGVyTWF4O1xyXG4gICAgfSBlbHNlIGlmIChjb3VudGVySW5wdXQudmFsdWUgPD0gY291bnRlck1pbikge1xyXG4gICAgICBjb3VudGVySW5wdXQudmFsdWUgPSBjb3VudGVyTWluO1xyXG4gICAgfSBlbHNlICB7XHJcbiAgICAgIG51bGxcclxuICAgIH1cclxuICB9KTtcclxufSk7XHJcblxyXG4vLyBPcGVuIG1lbnUgb24gY2xpY2sgdG8gQnVyZ2VyXHJcbmxldCBidXJnZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmJ1cmdlclwiKTtcclxubGV0IGhlYWRlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuaGVhZGVyXCIpO1xyXG5cclxuYnVyZ2VyLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgaGVhZGVyLmNsYXNzTGlzdC50b2dnbGUoXCJqcy1uYXYtb3BlblwiKTtcclxuICBsb2NrU2Nyb2xsKCk7XHJcbn0pO1xyXG5cclxuLy8gVmlkZW9cclxubGV0IHZpZGVvID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi52aWRlb19faXRlbVwiKTtcclxubGV0IHZpZGVvUGxheUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudmlkZW9fX3BsYXlcIik7XHJcbmxldCB2aWRlb1ByZXZpZXcgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnZpZGVvX19wcmV2aWV3XCIpO1xyXG5cclxudmlkZW9QbGF5QnV0dG9uPy5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIHZpZGVvLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XHJcbiAgdmlkZW9QbGF5QnV0dG9uLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcclxufSk7XHJcblxyXG4vLyBNb2RhbFxyXG5sZXQgbW9kYWxUcmlnZ2VyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5tb2RhbC10cmlnZ2VyXCIpO1xyXG5sZXQgbW9kYWxXaW5kb3cgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsXCIpO1xyXG5cclxubW9kYWxUcmlnZ2VyPy5mb3JFYWNoKChlKSA9PiB7XHJcbiAgZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgbW9kYWxUb2dnbGVWaXNpYmxlKCk7XHJcbiAgfSk7XHJcbn0pO1xyXG5cclxuY29uc3QgbW9kYWxUb2dnbGVWaXNpYmxlID0gKCkgPT4ge1xyXG4gIG1vZGFsV2luZG93LmNsYXNzTGlzdC50b2dnbGUoXCJqcy1zaG93XCIpO1xyXG4gIG92ZXJsYXkuY2xhc3NMaXN0LnRvZ2dsZShcImpzLXNob3dcIik7XHJcbiAgbG9ja1Njcm9sbCgpO1xyXG4gIHNldFRpbWVvdXQoICgpID0+IHtcclxuICAgIG1vZGFsV2luZG93LmNsYXNzTGlzdC5yZW1vdmUoXCJqcy1zdWJtaXRcIik7XHJcbiAgfSwgMzAwKTtcclxufTtcclxuXHJcbi8vIFZhbGlkYXRlIGZvcm1cclxuaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZm9ybVwiKSkge1xyXG4gIGNvbnN0IHZhbGlkYXRpb25Gb3JtID0gbmV3IEp1c3RWYWxpZGF0ZShcIiNmb3JtXCIsIHtcclxuICAgIGVycm9yRmllbGRDc3NDbGFzczogXCJqcy1pbnZhbGlkXCIsXHJcbiAgICBlcnJvckxhYmVsQ3NzQ2xhc3M6IFwianMtaW52YWxpZC1sYWJlbFwiLFxyXG4gICAgbG9ja0Zvcm06IHRydWUsXHJcbiAgICBlcnJvckxhYmVsU3R5bGU6IHtcclxuICAgICAgdGV4dERlY29yYXRpb246IFwidW5kZXJsaW5lZFwiLFxyXG4gICAgfSxcclxuICB9KTtcclxuXHJcbiAgdmFsaWRhdGlvbkZvcm1cclxuICAgIC5hZGRGaWVsZChcIiN1c2VyX25hbWVcIiwgW1xyXG4gICAgICB7XHJcbiAgICAgICAgcnVsZTogXCJtaW5MZW5ndGhcIixcclxuICAgICAgICB2YWx1ZTogMyxcclxuICAgICAgICBlcnJvck1lc3NhZ2U6IFwiTWluaW11bSAzIGNoYXJhY3RlcnMgcmVxdWlyZWRcIixcclxuICAgICAgfSxcclxuICAgICAge1xyXG4gICAgICAgIHJ1bGU6IFwicmVxdWlyZWRcIixcclxuICAgICAgICBlcnJvck1lc3NhZ2U6IFwiTmFtZSBpcyByZXF1aXJlZFwiLFxyXG4gICAgICB9LFxyXG4gICAgXSlcclxuICAgIC5hZGRGaWVsZChcIiN1c2VyX2VtYWlsXCIsIFtcclxuICAgICAge1xyXG4gICAgICAgIHJ1bGU6IFwicmVxdWlyZWRcIixcclxuICAgICAgICBlcnJvck1lc3NhZ2U6IFwiRW1haWwgaXMgcmVxdWlyZWRcIixcclxuICAgICAgfSxcclxuICAgICAge1xyXG4gICAgICAgIHJ1bGU6IFwiZW1haWxcIixcclxuICAgICAgICBlcnJvck1lc3NhZ2U6IFwiRW1haWwgaXMgaW52YWxpZFwiLFxyXG4gICAgICB9LFxyXG4gICAgXSlcclxuICAgIC5vblN1Y2Nlc3MoKGUpID0+IHtcclxuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICBpZiAobW9kYWxXaW5kb3cpIHtcclxuICAgICAgICBtb2RhbFdpbmRvdy5jbGFzc0xpc3QuYWRkKFwianMtc3VibWl0XCIpXHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSAndGhhbmtzLmh0bWwnO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICBcclxuICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiN1c2VyX2NvbXBhbnlcIikpIHtcclxuICAgIHZhbGlkYXRpb25Gb3JtXHJcbiAgICAgIC5hZGRGaWVsZChcIiN1c2VyX2NvbXBhbnlcIiwgW1xyXG4gICAgICB7XHJcbiAgICAgICAgcnVsZTogXCJyZXF1aXJlZFwiLCBcclxuICAgICAgICBlcnJvck1lc3NhZ2U6IFwiQ29tcGFueSBpcyByZXF1aXJlZFwiLFxyXG4gICAgICB9LFxyXG4gICAgXSlcclxuICB9O1xyXG59O1xyXG5cclxuLy8gRHJvcGRvd25cInNcclxuaWYgKCFFbGVtZW50LnByb3RvdHlwZS5jbG9zZXN0KSB7XHJcblx0aWYgKCFFbGVtZW50LnByb3RvdHlwZS5tYXRjaGVzKSB7XHJcblx0XHRFbGVtZW50LnByb3RvdHlwZS5tYXRjaGVzID0gRWxlbWVudC5wcm90b3R5cGUubXNNYXRjaGVzU2VsZWN0b3IgfHwgRWxlbWVudC5wcm90b3R5cGUud2Via2l0TWF0Y2hlc1NlbGVjdG9yO1xyXG5cdH07XHJcblx0RWxlbWVudC5wcm90b3R5cGUuY2xvc2VzdCA9IGZ1bmN0aW9uIChzKSB7XHJcblx0XHR2YXIgZWwgPSB0aGlzO1xyXG5cdFx0dmFyIGFuY2VzdG9yID0gdGhpcztcclxuXHRcdGlmICghZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNvbnRhaW5zKGVsKSkgcmV0dXJuIG51bGw7XHJcblx0XHRkbyB7XHJcblx0XHRcdGlmIChhbmNlc3Rvci5tYXRjaGVzKHMpKSByZXR1cm4gYW5jZXN0b3I7XHJcblx0XHRcdGFuY2VzdG9yID0gYW5jZXN0b3IucGFyZW50RWxlbWVudDtcclxuXHRcdH0gd2hpbGUgKGFuY2VzdG9yICE9PSBudWxsKTtcclxuXHRcdHJldHVybiBudWxsO1xyXG5cdH07XHJcbn07XHJcblxyXG5mdW5jdGlvbiBjbG9zZU9wZW5OYXZzKCkge1xyXG4gIHZhciBvcGVuRHJvcHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmRyb3Bkb3duX190cmlnZ2VyXCIpO1xyXG5cdGZvciAodmFyIGkgPSAwOyBpIDwgb3BlbkRyb3BzLmxlbmd0aDsgaSsrKSB7XHJcblx0XHR2YXIgb3BlbkRyb3Bkb3duID0gb3BlbkRyb3BzW2ldO1xyXG5cdFx0aWYgKG9wZW5Ecm9wZG93bi5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5jb250YWlucyhcImpzLW9wZW5cIikpIHtcclxuXHRcdCAgb3BlbkRyb3Bkb3duLnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcImpzLW9wZW5cIik7XHJcblx0XHR9O1xyXG5cdH07XHJcbn07XHJcblxyXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKGV2ZW50KSB7XHJcblx0aWYgKCFldmVudC50YXJnZXQuY2xvc2VzdChcIi5kcm9wZG93bl9fdHJpZ2dlclwiKSl7XHJcblx0XHRjbG9zZU9wZW5OYXZzKCk7XHJcblx0fSBcclxuXHRlbHNlIGlmIChldmVudC50YXJnZXQuY2xvc2VzdChcIi5kcm9wZG93bl9fdHJpZ2dlclwiKSAmJiBldmVudC50YXJnZXQucGFyZW50RWxlbWVudC5jbG9zZXN0KFwiLmpzLW9wZW5cIikpe1xyXG5cdFx0ZXZlbnQudGFyZ2V0LmNsb3Nlc3QoXCIuZHJvcGRvd25fX3RyaWdnZXJcIikucGFyZW50RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwianMtb3BlblwiKTtcclxuXHR9XHJcblx0ZWxzZSBpZiAoZXZlbnQudGFyZ2V0LmNsb3Nlc3QoXCIuZHJvcGRvd25fX3RyaWdnZXJcIikpe1xyXG5cdFx0Y2xvc2VPcGVuTmF2cygpO1xyXG5cdFx0ZXZlbnQudGFyZ2V0LmNsb3Nlc3QoXCIuZHJvcGRvd25fX3RyaWdnZXJcIikucGFyZW50RWxlbWVudC5jbGFzc0xpc3QuYWRkKFwianMtb3BlblwiKTtcclxuXHR9XHJcblx0XHJcbn0sIGZhbHNlKTtcclxuXHJcbi8vIFBsYW4gc2xpZGVyXHJcbmNvbnN0IHBsYW5TbGlkZXIgPSBuZXcgU3dpcGVyKFwiLnBsYW5fX3NsaWRlclwiLCB7XHJcbiAgbG9vcDogZmFsc2UsXHJcbiAgc2xpZGVzUGVyVmlldzogMSxcclxuICBzcGFjZUJldHdlZW46IDMwLFxyXG4gIHNwZWVkOiAzMDAsXHJcbiAgYnJlYWtwb2ludHM6IHtcclxuICAgIDc2ODoge1xyXG4gICAgICBzbGlkZXNQZXJWaWV3OiAyLFxyXG4gICAgfSxcclxuICAgIDEyMDA6IHtcclxuICAgICAgc2xpZGVzUGVyVmlldzogMyxcclxuICAgIH0sXHJcbiAgfSxcclxuXHJcbiAgcGFnaW5hdGlvbjoge1xyXG4gICAgZWw6IFwiLnBsYW5fX3BhZ2luYXRpb25cIixcclxuICB9LFxyXG4gIG5hdmlnYXRpb246IHtcclxuICAgIG5leHRFbDogXCIucGxhbl9fYnV0dG9uLW5leHRcIixcclxuICAgIHByZXZFbDogXCIucGxhbl9fYnV0dG9uLXByZXZcIixcclxuICB9LFxyXG59KTtcclxuXHJcbmlmICh3aW5kb3cubWF0Y2hNZWRpYShcIihtaW4td2lkdGg6IDk5MnB4KVwiKS5tYXRjaGVzKSB7XHJcbiAgLy8gQ3VzdG9tIHNjcm9sbGJhclxyXG4gIC8vIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsIGZ1bmN0aW9uKCkge1xyXG4gIC8vICAgT3ZlcmxheVNjcm9sbGJhcnMoZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcImJvZHlcIiksIHsgfSk7XHJcbiAgLy8gfSk7XHJcbiAgdmFyIGZpeGVkRWxlbSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5maXhlZC1zY3JvbGwnKTtcclxuXHJcbiAgdmFyIHNjcm9sbGJhciA9IFNjcm9sbGJhci5pbml0KGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zY3JvbGwtY29udGFpbmVyJyksIG9wdGlvbnMpO1xyXG5cclxuICBjb25zdCBvcHRpb25zID0ge1xyXG4gICAgZGFtcGluZzogMC4xLFxyXG4gIH07XHJcblxyXG4gIHNjcm9sbGJhci5hZGRMaXN0ZW5lcihmdW5jdGlvbihzdGF0dXMpIHtcclxuICAgIHZhciBvZmZzZXQgPSBzdGF0dXMub2Zmc2V0O1xyXG4gICAgXHJcbiAgICBmaXhlZEVsZW0uc3R5bGUudG9wID0gb2Zmc2V0LnkgKyAncHgnO1xyXG4gICAgZml4ZWRFbGVtLnN0eWxlLmxlZnQgPSBvZmZzZXQueCArICdweCc7XHJcbiAgfSk7XHJcbn0gZWxzZSB7XHJcbiAgLy8gQmVuZWZpdHMgc2xpZGVyXHJcbiAgY29uc3QgYmVuZWZpdHNTbGlkZXIgPSBuZXcgU3dpcGVyKFwiLmJlbmVmaXRzX19zbGlkZXJcIiwge1xyXG4gICAgbG9vcDogZmFsc2UsXHJcbiAgICBzbGlkZXNQZXJWaWV3OiAxLFxyXG4gICAgc3BhY2VCZXR3ZWVuOiAzMCxcclxuICAgIHNwZWVkOiAzMDAsXHJcbiAgICBicmVha3BvaW50czoge1xyXG4gICAgICA3Njg6IHtcclxuICAgICAgICBzbGlkZXNQZXJWaWV3OiAyLFxyXG4gICAgICB9LFxyXG4gICAgfSxcclxuXHJcbiAgICBwYWdpbmF0aW9uOiB7XHJcbiAgICAgIGVsOiBcIi5iZW5lZml0c19fcGFnaW5hdGlvblwiLFxyXG4gICAgfSxcclxuICAgIG5hdmlnYXRpb246IHtcclxuICAgICAgbmV4dEVsOiBcIi5iZW5lZml0c19fYnV0dG9uLW5leHRcIixcclxuICAgICAgcHJldkVsOiBcIi5iZW5lZml0c19fYnV0dG9uLXByZXZcIixcclxuICAgIH0sXHJcbiAgfSk7XHJcbn07Il19