"use strict";

// Lock scroll on body
var lockScroll = function lockScroll() {
  document.body.classList.toggle("js-lock");

  if (!document.body.classList.contains("js-lock")) {
    document.body.toggleAttribute("class");
  } else {
    null;
  }
}; // Click on overlay


var overlay = document.querySelector(".overlay");
var form = document.querySelector("#form");
overlay === null || overlay === void 0 ? void 0 : overlay.addEventListener("click", function () {
  var formFieldInput = document.querySelectorAll(".form__field input");
  var formFieldLabel = document.querySelectorAll(".js-invalid-label");

  for (var i = 0; i < formFieldInput.length; i++) {
    formFieldInput[i].classList.remove('js-invalid');
  }

  for (var _i = 0; _i < formFieldLabel.length; _i++) {
    formFieldLabel[_i].remove();
  }

  modalToggleVisible();
}); // Custom switch button

var switchLabel = document.querySelectorAll(".switch__label");
switchLabel === null || switchLabel === void 0 ? void 0 : switchLabel.forEach(function (e) {
  e.addEventListener("click", function () {
    if (e.querySelector("input").checked) {
      e.classList.add("js-toggle");
    } else {
      e.classList.remove("js-toggle");
    }
  });
}); // Custom counter

var counterItem = document.querySelectorAll(".counter__item");
counterItem === null || counterItem === void 0 ? void 0 : counterItem.forEach(function (e) {
  var counterInput = e.querySelector(".counter__input");
  var counterPlus = e.querySelector(".counter__plus");
  var counterMinus = e.querySelector(".counter__minus");
  var counterMax = parseInt(counterInput.getAttribute("max"));
  var counterMin = parseInt(counterInput.getAttribute("min"));
  counterPlus.addEventListener("click", function () {
    if (counterInput.value >= counterMax) {
      counterInput.value = counterMax;
    } else {
      counterInput.value++;
      counterInput.setAttribute("value", counterInput.value);
    }
  });
  counterMinus.addEventListener("click", function () {
    if (counterInput.value <= counterMin) {
      counterInput.value = counterMin;
    } else {
      counterInput.value--;
      counterInput.setAttribute("value", counterInput.value);
    }
  });
  counterInput.addEventListener("keyup", function () {
    if (counterInput.value >= counterMax) {
      counterInput.value = counterMax;
    } else if (counterInput.value <= counterMin) {
      counterInput.value = counterMin;
    } else {
      null;
    }
  });
}); // Open menu on click to Burger

var burger = document.querySelector(".burger");
var header = document.querySelector(".header");
burger.addEventListener("click", function () {
  header.classList.toggle("js-nav-open");
  lockScroll();
}); // Video

var video = document.querySelector(".video__item");
var videoPlayButton = document.querySelector(".video__play");
var videoPreview = document.querySelector(".video__preview");
videoPlayButton === null || videoPlayButton === void 0 ? void 0 : videoPlayButton.addEventListener("click", function () {
  video.style.display = "block";
  videoPlayButton.style.display = "none";
}); // Modal

var modalTrigger = document.querySelectorAll(".modal-trigger");
var modalWindow = document.querySelector(".modal");
modalTrigger === null || modalTrigger === void 0 ? void 0 : modalTrigger.forEach(function (e) {
  e.addEventListener("click", function () {
    modalToggleVisible();
  });
});

var modalToggleVisible = function modalToggleVisible() {
  modalWindow.classList.toggle("js-show");
  overlay.classList.toggle("js-show");
  lockScroll();
  setTimeout(function () {
    modalWindow.classList.remove("js-submit");
  }, 300);
}; // Validate form


if (document.querySelector("#form")) {
  var validationForm = new JustValidate("#form", {
    errorFieldCssClass: "js-invalid",
    errorLabelCssClass: "js-invalid-label",
    lockForm: true,
    errorLabelStyle: {
      textDecoration: "underlined"
    }
  });
  validationForm.addField("#user_name", [{
    rule: "minLength",
    value: 3,
    errorMessage: "Minimum 3 characters required"
  }, {
    rule: "required",
    errorMessage: "Name is required"
  }]).addField("#user_email", [{
    rule: "required",
    errorMessage: "Email is required"
  }, {
    rule: "email",
    errorMessage: "Email is invalid"
  }]).onSuccess(function (e) {
    e.preventDefault();
    modalWindow.classList.add("js-submit");
  });

  if (document.querySelector("#user_company")) {
    validationForm.addField("#user_company", [{
      rule: "required",
      errorMessage: "Company is required"
    }]);
  }
} // Dropdown"s


if (!Element.prototype.closest) {
  if (!Element.prototype.matches) {
    Element.prototype.matches = Element.prototype.msMatchesSelector || Element.prototype.webkitMatchesSelector;
  }

  Element.prototype.closest = function (s) {
    var el = this;
    var ancestor = this;
    if (!document.documentElement.contains(el)) return null;

    do {
      if (ancestor.matches(s)) return ancestor;
      ancestor = ancestor.parentElement;
    } while (ancestor !== null);

    return null;
  };
}

function closeOpenNavs() {
  var openDrops = document.querySelectorAll(".dropdown__trigger");

  for (var i = 0; i < openDrops.length; i++) {
    var openDropdown = openDrops[i];

    if (openDropdown.parentElement.classList.contains("js-open")) {
      openDropdown.parentElement.classList.remove("js-open");
    }
  }
}

document.addEventListener("click", function (event) {
  if (!event.target.closest(".dropdown__trigger")) {
    closeOpenNavs();
  } else if (event.target.closest(".dropdown__trigger") && event.target.parentElement.closest(".js-open")) {
    event.target.closest(".dropdown__trigger").parentElement.classList.remove("js-open");
  } else if (event.target.closest(".dropdown__trigger")) {
    closeOpenNavs();
    event.target.closest(".dropdown__trigger").parentElement.classList.add("js-open");
  }
}, false); // Plan slider

var planSlider = new Swiper(".plan__slider", {
  loop: false,
  slidesPerView: 1,
  spaceBetween: 30,
  speed: 300,
  breakpoints: {
    768: {
      slidesPerView: 2
    },
    1200: {
      slidesPerView: 3
    }
  },
  pagination: {
    el: ".plan__pagination"
  },
  navigation: {
    nextEl: ".plan__button-next",
    prevEl: ".plan__button-prev"
  }
});

if (!window.matchMedia("(min-width: 992px)").matches) {
  // Benefits slider
  var benefitsSlider = new Swiper(".benefits__slider", {
    loop: false,
    slidesPerView: 1,
    spaceBetween: 30,
    speed: 300,
    breakpoints: {
      768: {
        slidesPerView: 2
      }
    },
    pagination: {
      el: ".benefits__pagination"
    },
    navigation: {
      nextEl: ".benefits__button-next",
      prevEl: ".benefits__button-prev"
    }
  });
} else {}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsibG9ja1Njcm9sbCIsImRvY3VtZW50IiwiYm9keSIsImNsYXNzTGlzdCIsInRvZ2dsZSIsImNvbnRhaW5zIiwidG9nZ2xlQXR0cmlidXRlIiwib3ZlcmxheSIsInF1ZXJ5U2VsZWN0b3IiLCJmb3JtIiwiYWRkRXZlbnRMaXN0ZW5lciIsImZvcm1GaWVsZElucHV0IiwicXVlcnlTZWxlY3RvckFsbCIsImZvcm1GaWVsZExhYmVsIiwiaSIsImxlbmd0aCIsInJlbW92ZSIsIm1vZGFsVG9nZ2xlVmlzaWJsZSIsInN3aXRjaExhYmVsIiwiZm9yRWFjaCIsImUiLCJjaGVja2VkIiwiYWRkIiwiY291bnRlckl0ZW0iLCJjb3VudGVySW5wdXQiLCJjb3VudGVyUGx1cyIsImNvdW50ZXJNaW51cyIsImNvdW50ZXJNYXgiLCJwYXJzZUludCIsImdldEF0dHJpYnV0ZSIsImNvdW50ZXJNaW4iLCJ2YWx1ZSIsInNldEF0dHJpYnV0ZSIsImJ1cmdlciIsImhlYWRlciIsInZpZGVvIiwidmlkZW9QbGF5QnV0dG9uIiwidmlkZW9QcmV2aWV3Iiwic3R5bGUiLCJkaXNwbGF5IiwibW9kYWxUcmlnZ2VyIiwibW9kYWxXaW5kb3ciLCJzZXRUaW1lb3V0IiwidmFsaWRhdGlvbkZvcm0iLCJKdXN0VmFsaWRhdGUiLCJlcnJvckZpZWxkQ3NzQ2xhc3MiLCJlcnJvckxhYmVsQ3NzQ2xhc3MiLCJsb2NrRm9ybSIsImVycm9yTGFiZWxTdHlsZSIsInRleHREZWNvcmF0aW9uIiwiYWRkRmllbGQiLCJydWxlIiwiZXJyb3JNZXNzYWdlIiwib25TdWNjZXNzIiwicHJldmVudERlZmF1bHQiLCJFbGVtZW50IiwicHJvdG90eXBlIiwiY2xvc2VzdCIsIm1hdGNoZXMiLCJtc01hdGNoZXNTZWxlY3RvciIsIndlYmtpdE1hdGNoZXNTZWxlY3RvciIsInMiLCJlbCIsImFuY2VzdG9yIiwiZG9jdW1lbnRFbGVtZW50IiwicGFyZW50RWxlbWVudCIsImNsb3NlT3Blbk5hdnMiLCJvcGVuRHJvcHMiLCJvcGVuRHJvcGRvd24iLCJldmVudCIsInRhcmdldCIsInBsYW5TbGlkZXIiLCJTd2lwZXIiLCJsb29wIiwic2xpZGVzUGVyVmlldyIsInNwYWNlQmV0d2VlbiIsInNwZWVkIiwiYnJlYWtwb2ludHMiLCJwYWdpbmF0aW9uIiwibmF2aWdhdGlvbiIsIm5leHRFbCIsInByZXZFbCIsIndpbmRvdyIsIm1hdGNoTWVkaWEiLCJiZW5lZml0c1NsaWRlciJdLCJtYXBwaW5ncyI6Ijs7QUFBQTtBQUNBLElBQU1BLFVBQVUsR0FBRyxTQUFiQSxVQUFhLEdBQU07QUFDdkJDLEVBQUFBLFFBQVEsQ0FBQ0MsSUFBVCxDQUFjQyxTQUFkLENBQXdCQyxNQUF4QixDQUErQixTQUEvQjs7QUFDQSxNQUFJLENBQUNILFFBQVEsQ0FBQ0MsSUFBVCxDQUFjQyxTQUFkLENBQXdCRSxRQUF4QixDQUFpQyxTQUFqQyxDQUFMLEVBQWtEO0FBQ2hESixJQUFBQSxRQUFRLENBQUNDLElBQVQsQ0FBY0ksZUFBZCxDQUE4QixPQUE5QjtBQUNELEdBRkQsTUFFTztBQUNMO0FBQ0Q7QUFDRixDQVBELEMsQ0FTQTs7O0FBQ0EsSUFBSUMsT0FBTyxHQUFHTixRQUFRLENBQUNPLGFBQVQsQ0FBdUIsVUFBdkIsQ0FBZDtBQUNBLElBQUlDLElBQUksR0FBR1IsUUFBUSxDQUFDTyxhQUFULENBQXVCLE9BQXZCLENBQVg7QUFFQUQsT0FBTyxTQUFQLElBQUFBLE9BQU8sV0FBUCxZQUFBQSxPQUFPLENBQUVHLGdCQUFULENBQTBCLE9BQTFCLEVBQW1DLFlBQU07QUFDdkMsTUFBSUMsY0FBYyxHQUFHVixRQUFRLENBQUNXLGdCQUFULENBQTBCLG9CQUExQixDQUFyQjtBQUNBLE1BQUlDLGNBQWMsR0FBR1osUUFBUSxDQUFDVyxnQkFBVCxDQUEwQixtQkFBMUIsQ0FBckI7O0FBRUEsT0FBSyxJQUFJRSxDQUFDLEdBQUcsQ0FBYixFQUFnQkEsQ0FBQyxHQUFHSCxjQUFjLENBQUNJLE1BQW5DLEVBQTJDRCxDQUFDLEVB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SSxFQUFFLEtBRCtDO0FBRXJEQyxJQUFBQSxhQUFhLEVBQUUsQ0FGc0M7QUFHckRDLElBQUFBLFlBQVksRUFBRSxFQUh1QztBQUlyREMsSUFBQUEsS0FBSyxFQUFFLEdBSjhDO0FBS3JEQyxJQUFBQSxXQUFXLEVBQUU7QUFDWCxXQUFLO0FBQ0hILFFBQUFBLGFBQWEsRUFBRTtBQURaO0FBRE0sS0FMd0M7QUFXckRJLElBQUFBLFVBQVUsRUFBRTtBQUNWaEIsTUFBQUEsRUFBRSxFQUFFO0FBRE0sS0FYeUM7QUFjckRpQixJQUFBQSxVQUFVLEVBQUU7QUFDVkMsTUFBQUEsTUFBTSxFQUFFLHdCQURFO0FBRVZDLE1BQUFBLE1BQU0sRUFBRTtBQUZFO0FBZHlDLEdBQWhDLENBQXZCO0FBbUJELENBckJELE1BcUJPLENBQ04iLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vIExvY2sgc2Nyb2xsIG9uIGJvZHlcclxuY29uc3QgbG9ja1Njcm9sbCA9ICgpID0+IHtcclxuICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC50b2dnbGUoXCJqcy1sb2NrXCIpO1xyXG4gIGlmICghZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuY29udGFpbnMoXCJqcy1sb2NrXCIpKSB7XHJcbiAgICBkb2N1bWVudC5ib2R5LnRvZ2dsZUF0dHJpYnV0ZShcImNsYXNzXCIpO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBudWxsXHJcbiAgfVxyXG59O1xyXG5cclxuLy8gQ2xpY2sgb24gb3ZlcmxheVxyXG5sZXQgb3ZlcmxheSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIub3ZlcmxheVwiKTtcclxubGV0IGZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2Zvcm1cIik7XHJcblxyXG5vdmVybGF5Py5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIGxldCBmb3JtRmllbGRJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuZm9ybV9fZmllbGQgaW5wdXRcIik7XHJcbiAgbGV0IGZvcm1GaWVsZExhYmVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5qcy1pbnZhbGlkLWxhYmVsXCIpO1xyXG5cclxuICBmb3IgKGxldCBpID0gMDsgaSA8IGZvcm1GaWVsZElucHV0Lmxlbmd0aDsgaSsrKXtcclxuICAgIGZvcm1GaWVsZElucHV0W2ldLmNsYXNzTGlzdC5yZW1vdmUoJ2pzLWludmFsaWQnKTtcclxuICB9XHJcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBmb3JtRmllbGRMYWJlbC5sZW5ndGg7IGkrKyl7XHJcbiAgICBmb3JtRmllbGRMYWJlbFtpXS5yZW1vdmUoKTtcclxuICB9XHJcbiAgbW9kYWxUb2dnbGVWaXNpYmxlKClcclxufSk7XHJcblxyXG4vLyBDdXN0b20gc3dpdGNoIGJ1dHRvblxyXG5sZXQgc3dpdGNoTGFiZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnN3aXRjaF9fbGFiZWxcIilcclxuXHJcbnN3aXRjaExhYmVsPy5mb3JFYWNoKChlKSA9PiB7XHJcbiAgZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgaWYgKGUucXVlcnlTZWxlY3RvcihcImlucHV0XCIpLmNoZWNrZWQpIHtcclxuICAgICAgZS5jbGFzc0xpc3QuYWRkKFwianMtdG9nZ2xlXCIpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgZS5jbGFzc0xpc3QucmVtb3ZlKFwianMtdG9nZ2xlXCIpO1xyXG4gICAgfVxyXG4gIH0pXHJcbn0pO1xyXG5cclxuLy8gQ3VzdG9tIGNvdW50ZXJcclxubGV0IGNvdW50ZXJJdGVtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5jb3VudGVyX19pdGVtXCIpO1xyXG5cclxuY291bnRlckl0ZW0/LmZvckVhY2goKGUpID0+IHtcclxuICBsZXQgY291bnRlcklucHV0ID0gZS5xdWVyeVNlbGVjdG9yKFwiLmNvdW50ZXJfX2lucHV0XCIpO1xyXG4gIGxldCBjb3VudGVyUGx1cyA9IGUucXVlcnlTZWxlY3RvcihcIi5jb3VudGVyX19wbHVzXCIpO1xyXG4gIGxldCBjb3VudGVyTWludXMgPSBlLnF1ZXJ5U2VsZWN0b3IoXCIuY291bnRlcl9fbWludXNcIik7XHJcblxyXG4gIGxldCBjb3VudGVyTWF4ID0gcGFyc2VJbnQoY291bnRlcklucHV0LmdldEF0dHJpYnV0ZShcIm1heFwiKSk7XHJcbiAgbGV0IGNvdW50ZXJNaW4gPSBwYXJzZUludChjb3VudGVySW5wdXQuZ2V0QXR0cmlidXRlKFwibWluXCIpKTtcclxuXHJcbiAgY291bnRlclBsdXMuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgIGlmIChjb3VudGVySW5wdXQudmFsdWUgPj0gY291bnRlck1heCApIHtcclxuICAgICAgY291bnRlcklucHV0LnZhbHVlID0gY291bnRlck1heDtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGNvdW50ZXJJbnB1dC52YWx1ZSsrXHJcbiAgICAgIGNvdW50ZXJJbnB1dC5zZXRBdHRyaWJ1dGUoXCJ2YWx1ZVwiLCBjb3VudGVySW5wdXQudmFsdWUpO1xyXG4gICAgfVxyXG4gIH0pO1xyXG4gIFxyXG4gIGNvdW50ZXJNaW51cy5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgaWYgKGNvdW50ZXJJbnB1dC52YWx1ZSA8PSBjb3VudGVyTWluICkge1xyXG4gICAgICBjb3VudGVySW5wdXQudmFsdWUgPSBjb3VudGVyTWluO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgY291bnRlcklucHV0LnZhbHVlLS1cclxuICAgICAgY291bnRlcklucHV0LnNldEF0dHJpYnV0ZShcInZhbHVlXCIsIGNvdW50ZXJJbnB1dC52YWx1ZSk7XHJcbiAgICB9XHJcbiAgfSk7XHJcblxyXG4gIGNvdW50ZXJJbnB1dC5hZGRFdmVudExpc3RlbmVyKFwia2V5dXBcIiwgKCkgPT4ge1xyXG4gICAgaWYgKGNvdW50ZXJJbnB1dC52YWx1ZSA+PSBjb3VudGVyTWF4KSB7XHJcbiAgICAgIGNvdW50ZXJJbnB1dC52YWx1ZSA9IGNvdW50ZXJNYXg7XHJcbiAgICB9IGVsc2UgaWYgKGNvdW50ZXJJbnB1dC52YWx1ZSA8PSBjb3VudGVyTWluKSB7XHJcbiAgICAgIGNvdW50ZXJJbnB1dC52YWx1ZSA9IGNvdW50ZXJNaW47XHJcbiAgICB9IGVsc2UgIHtcclxuICAgICAgbnVsbFxyXG4gICAgfVxyXG4gIH0pO1xyXG59KVxyXG5cclxuLy8gT3BlbiBtZW51IG9uIGNsaWNrIHRvIEJ1cmdlclxyXG5sZXQgYnVyZ2VyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5idXJnZXJcIik7XHJcbmxldCBoZWFkZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmhlYWRlclwiKTtcclxuXHJcbmJ1cmdlci5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIGhlYWRlci5jbGFzc0xpc3QudG9nZ2xlKFwianMtbmF2LW9wZW5cIik7XHJcbiAgbG9ja1Njcm9sbCgpXHJcbn0pXHJcblxyXG4vLyBWaWRlb1xyXG5sZXQgdmlkZW8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnZpZGVvX19pdGVtXCIpO1xyXG5sZXQgdmlkZW9QbGF5QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi52aWRlb19fcGxheVwiKTtcclxubGV0IHZpZGVvUHJldmlldyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudmlkZW9fX3ByZXZpZXdcIik7XHJcblxyXG52aWRlb1BsYXlCdXR0b24/LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgdmlkZW8uc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcclxuICB2aWRlb1BsYXlCdXR0b24uc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xyXG59KTtcclxuXHJcbi8vIE1vZGFsXHJcbmxldCBtb2RhbFRyaWdnZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLm1vZGFsLXRyaWdnZXJcIik7XHJcbmxldCBtb2RhbFdpbmRvdyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxcIik7XHJcblxyXG5tb2RhbFRyaWdnZXI/LmZvckVhY2goKGUpID0+IHtcclxuICBlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICBtb2RhbFRvZ2dsZVZpc2libGUoKTtcclxuICB9KTtcclxufSlcclxuXHJcbmNvbnN0IG1vZGFsVG9nZ2xlVmlzaWJsZSA9ICgpID0+IHtcclxuICBtb2RhbFdpbmRvdy5jbGFzc0xpc3QudG9nZ2xlKFwianMtc2hvd1wiKTtcclxuICBvdmVybGF5LmNsYXNzTGlzdC50b2dnbGUoXCJqcy1zaG93XCIpO1xyXG4gIGxvY2tTY3JvbGwoKTtcclxuICBzZXRUaW1lb3V0KCAoKSA9PiB7XHJcbiAgICBtb2RhbFdpbmRvdy5jbGFzc0xpc3QucmVtb3ZlKFwianMtc3VibWl0XCIpO1xyXG4gIH0sIDMwMClcclxufVxyXG5cclxuLy8gVmFsaWRhdGUgZm9ybVxyXG5pZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNmb3JtXCIpKSB7XHJcbiAgY29uc3QgdmFsaWRhdGlvbkZvcm0gPSBuZXcgSnVzdFZhbGlkYXRlKFwiI2Zvcm1cIiwge1xyXG4gICAgZXJyb3JGaWVsZENzc0NsYXNzOiBcImpzLWludmFsaWRcIixcclxuICAgIGVycm9yTGFiZWxDc3NDbGFzczogXCJqcy1pbnZhbGlkLWxhYmVsXCIsXHJcbiAgICBsb2NrRm9ybTogdHJ1ZSxcclxuICAgIGVycm9yTGFiZWxTdHlsZToge1xyXG4gICAgICB0ZXh0RGVjb3JhdGlvbjogXCJ1bmRlcmxpbmVkXCIsXHJcbiAgICB9LFxyXG4gIH0pO1xyXG5cclxuICB2YWxpZGF0aW9uRm9ybVxyXG4gICAgLmFkZEZpZWxkKFwiI3VzZXJfbmFtZVwiLCBbXHJcbiAgICAgIHtcclxuICAgICAgICBydWxlOiBcIm1pbkxlbmd0aFwiLFxyXG4gICAgICAgIHZhbHVlOiAzLFxyXG4gICAgICAgIGVycm9yTWVzc2FnZTogXCJNaW5pbXVtIDMgY2hhcmFjdGVycyByZXF1aXJlZFwiLFxyXG4gICAgICB9LFxyXG4gICAgICB7XHJcbiAgICAgICAgcnVsZTogXCJyZXF1aXJlZFwiLFxyXG4gICAgICAgIGVycm9yTWVzc2FnZTogXCJOYW1lIGlzIHJlcXVpcmVkXCIsXHJcbiAgICAgIH0sXHJcbiAgICBdKVxyXG4gICAgLmFkZEZpZWxkKFwiI3VzZXJfZW1haWxcIiwgW1xyXG4gICAgICB7XHJcbiAgICAgICAgcnVsZTogXCJyZXF1aXJlZFwiLFxyXG4gICAgICAgIGVycm9yTWVzc2FnZTogXCJFbWFpbCBpcyByZXF1aXJlZFwiLFxyXG4gICAgICB9LFxyXG4gICAgICB7XHJcbiAgICAgICAgcnVsZTogXCJlbWFpbFwiLFxyXG4gICAgICAgIGVycm9yTWVzc2FnZTogXCJFbWFpbCBpcyBpbnZhbGlkXCIsXHJcbiAgICAgIH0sXHJcbiAgICBdKVxyXG4gICAgLm9uU3VjY2VzcygoZSkgPT4ge1xyXG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIG1vZGFsV2luZG93LmNsYXNzTGlzdC5hZGQoXCJqcy1zdWJtaXRcIik7XHJcbiAgICB9KTtcclxuICBcclxuICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiN1c2VyX2NvbXBhbnlcIikpIHtcclxuICAgIHZhbGlkYXRpb25Gb3JtXHJcbiAgICAgIC5hZGRGaWVsZChcIiN1c2VyX2NvbXBhbnlcIiwgW1xyXG4gICAgICB7XHJcbiAgICAgICAgcnVsZTogXCJyZXF1aXJlZFwiLCBcclxuICAgICAgICBlcnJvck1lc3NhZ2U6IFwiQ29tcGFueSBpcyByZXF1aXJlZFwiLFxyXG4gICAgICB9LFxyXG4gICAgXSlcclxuICB9XHJcbn1cclxuXHJcbi8vIERyb3Bkb3duXCJzXHJcbmlmICghRWxlbWVudC5wcm90b3R5cGUuY2xvc2VzdCkge1xyXG5cdGlmICghRWxlbWVudC5wcm90b3R5cGUubWF0Y2hlcykge1xyXG5cdFx0RWxlbWVudC5wcm90b3R5cGUubWF0Y2hlcyA9IEVsZW1lbnQucHJvdG90eXBlLm1zTWF0Y2hlc1NlbGVjdG9yIHx8IEVsZW1lbnQucHJvdG90eXBlLndlYmtpdE1hdGNoZXNTZWxlY3RvcjtcclxuXHR9XHJcblx0RWxlbWVudC5wcm90b3R5cGUuY2xvc2VzdCA9IGZ1bmN0aW9uIChzKSB7XHJcblx0XHR2YXIgZWwgPSB0aGlzO1xyXG5cdFx0dmFyIGFuY2VzdG9yID0gdGhpcztcclxuXHRcdGlmICghZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNvbnRhaW5zKGVsKSkgcmV0dXJuIG51bGw7XHJcblx0XHRkbyB7XHJcblx0XHRcdGlmIChhbmNlc3Rvci5tYXRjaGVzKHMpKSByZXR1cm4gYW5jZXN0b3I7XHJcblx0XHRcdGFuY2VzdG9yID0gYW5jZXN0b3IucGFyZW50RWxlbWVudDtcclxuXHRcdH0gd2hpbGUgKGFuY2VzdG9yICE9PSBudWxsKTtcclxuXHRcdHJldHVybiBudWxsO1xyXG5cdH07XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNsb3NlT3Blbk5hdnMoKSB7XHJcbiAgdmFyIG9wZW5Ecm9wcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuZHJvcGRvd25fX3RyaWdnZXJcIik7XHJcblx0Zm9yICh2YXIgaSA9IDA7IGkgPCBvcGVuRHJvcHMubGVuZ3RoOyBpKyspIHtcclxuXHRcdHZhciBvcGVuRHJvcGRvd24gPSBvcGVuRHJvcHNbaV07XHJcblx0XHRpZiAob3BlbkRyb3Bkb3duLnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKFwianMtb3BlblwiKSkge1xyXG5cdFx0ICBvcGVuRHJvcGRvd24ucGFyZW50RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwianMtb3BlblwiKTtcclxuXHRcdH1cclxuXHR9ICBcclxufVxyXG5cclxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uIChldmVudCkge1xyXG5cdGlmICghZXZlbnQudGFyZ2V0LmNsb3Nlc3QoXCIuZHJvcGRvd25fX3RyaWdnZXJcIikpe1xyXG5cdFx0Y2xvc2VPcGVuTmF2cygpO1xyXG5cdH0gXHJcblx0ZWxzZSBpZiAoZXZlbnQudGFyZ2V0LmNsb3Nlc3QoXCIuZHJvcGRvd25fX3RyaWdnZXJcIikgJiYgZXZlbnQudGFyZ2V0LnBhcmVudEVsZW1lbnQuY2xvc2VzdChcIi5qcy1vcGVuXCIpKXtcclxuXHRcdGV2ZW50LnRhcmdldC5jbG9zZXN0KFwiLmRyb3Bkb3duX190cmlnZ2VyXCIpLnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcImpzLW9wZW5cIik7XHJcblx0fVxyXG5cdGVsc2UgaWYgKGV2ZW50LnRhcmdldC5jbG9zZXN0KFwiLmRyb3Bkb3duX190cmlnZ2VyXCIpKXtcclxuXHRcdGNsb3NlT3Blbk5hdnMoKTtcclxuXHRcdGV2ZW50LnRhcmdldC5jbG9zZXN0KFwiLmRyb3Bkb3duX190cmlnZ2VyXCIpLnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImpzLW9wZW5cIik7XHJcblx0fVxyXG5cdFxyXG59LCBmYWxzZSk7XHJcblxyXG4vLyBQbGFuIHNsaWRlclxyXG5jb25zdCBwbGFuU2xpZGVyID0gbmV3IFN3aXBlcihcIi5wbGFuX19zbGlkZXJcIiwge1xyXG4gIGxvb3A6IGZhbHNlLFxyXG4gIHNsaWRlc1BlclZpZXc6IDEsXHJcbiAgc3BhY2VCZXR3ZWVuOiAzMCxcclxuICBzcGVlZDogMzAwLFxyXG4gIGJyZWFrcG9pbnRzOiB7XHJcbiAgICA3Njg6IHtcclxuICAgICAgc2xpZGVzUGVyVmlldzogMixcclxuICAgIH0sXHJcbiAgICAxMjAwOiB7XHJcbiAgICAgIHNsaWRlc1BlclZpZXc6IDMsXHJcbiAgICB9LFxyXG4gIH0sXHJcblxyXG4gIHBhZ2luYXRpb246IHtcclxuICAgIGVsOiBcIi5wbGFuX19wYWdpbmF0aW9uXCIsXHJcbiAgfSxcclxuICBuYXZpZ2F0aW9uOiB7XHJcbiAgICBuZXh0RWw6IFwiLnBsYW5fX2J1dHRvbi1uZXh0XCIsXHJcbiAgICBwcmV2RWw6IFwiLnBsYW5fX2J1dHRvbi1wcmV2XCIsXHJcbiAgfSxcclxufSk7XHJcblxyXG5pZiAoIXdpbmRvdy5tYXRjaE1lZGlhKFwiKG1pbi13aWR0aDogOTkycHgpXCIpLm1hdGNoZXMpIHtcclxuICAvLyBCZW5lZml0cyBzbGlkZXJcclxuICBjb25zdCBiZW5lZml0c1NsaWRlciA9IG5ldyBTd2lwZXIoXCIuYmVuZWZpdHNfX3NsaWRlclwiLCB7XHJcbiAgICBsb29wOiBmYWxzZSxcclxuICAgIHNsaWRlc1BlclZpZXc6IDEsXHJcbiAgICBzcGFjZUJldHdlZW46IDMwLFxyXG4gICAgc3BlZWQ6IDMwMCxcclxuICAgIGJyZWFrcG9pbnRzOiB7XHJcbiAgICAgIDc2ODoge1xyXG4gICAgICAgIHNsaWRlc1BlclZpZXc6IDIsXHJcbiAgICAgIH0sXHJcbiAgICB9LFxyXG5cclxuICAgIHBhZ2luYXRpb246IHtcclxuICAgICAgZWw6IFwiLmJlbmVmaXRzX19wYWdpbmF0aW9uXCIsXHJcbiAgICB9LFxyXG4gICAgbmF2aWdhdGlvbjoge1xyXG4gICAgICBuZXh0RWw6IFwiLmJlbmVmaXRzX19idXR0b24tbmV4dFwiLFxyXG4gICAgICBwcmV2RWw6IFwiLmJlbmVmaXRzX19idXR0b24tcHJldlwiLFxyXG4gICAgfSxcclxuICB9KTtcclxufSBlbHNlIHtcclxufSJdfQ==