"use strict";

// Lock scroll on body
var lockScroll = function lockScroll() {
  document.body.classList.toggle("js-lock");

  if (!document.body.classList.contains("js-lock")) {
    document.body.toggleAttribute("class");
  } else {
    null;
  }
}; // Click on overlay


var overlay = document.querySelector(".overlay");
var form = document.querySelector("#form");
overlay === null || overlay === void 0 ? void 0 : overlay.addEventListener("click", function () {
  var formFieldInput = document.querySelectorAll(".form__field input");
  var formFieldLabel = document.querySelectorAll(".js-invalid-label");

  for (var i = 0; i < formFieldInput.length; i++) {
    formFieldInput[i].classList.remove('js-invalid');
  }

  for (var _i = 0; _i < formFieldLabel.length; _i++) {
    formFieldLabel[_i].remove();
  }

  modalToggleVisible();
}); // Custom switch button

var switchLabel = document.querySelectorAll(".switch__label");
switchLabel === null || switchLabel === void 0 ? void 0 : switchLabel.forEach(function (e) {
  e.addEventListener("click", function () {
    if (e.querySelector("input").checked) {
      e.classList.add("js-toggle");
    } else {
      e.classList.remove("js-toggle");
    }
  });
}); // Custom counter

var counterItem = document.querySelectorAll(".counter__item");
counterItem === null || counterItem === void 0 ? void 0 : counterItem.forEach(function (e) {
  var counterInput = e.querySelector(".counter__input");
  var counterPlus = e.querySelector(".counter__plus");
  var counterMinus = e.querySelector(".counter__minus");
  var counterMax = parseInt(counterInput.getAttribute("max"));
  var counterMin = parseInt(counterInput.getAttribute("min"));
  counterPlus.addEventListener("click", function () {
    if (counterInput.value >= counterMax) {
      counterInput.value = counterMax;
    } else {
      counterInput.value++;
      counterInput.setAttribute("value", counterInput.value);
    }
  });
  counterMinus.addEventListener("click", function () {
    if (counterInput.value <= counterMin) {
      counterInput.value = counterMin;
    } else {
      counterInput.value--;
      counterInput.setAttribute("value", counterInput.value);
    }
  });
  counterInput.addEventListener("keyup", function () {
    if (counterInput.value >= counterMax) {
      counterInput.value = counterMax;
    } else if (counterInput.value <= counterMin) {
      counterInput.value = counterMin;
    } else {
      null;
    }
  });
}); // Open menu on click to Burger

var burger = document.querySelector(".burger");
var header = document.querySelector(".header");
burger.addEventListener("click", function () {
  header.classList.toggle("js-nav-open");
  lockScroll();
}); // Video

var video = document.querySelector(".video__item");
var videoPlayButton = document.querySelector(".video__play");
var videoPreview = document.querySelector(".video__preview");
videoPlayButton === null || videoPlayButton === void 0 ? void 0 : videoPlayButton.addEventListener("click", function () {
  video.style.display = "block";
  videoPlayButton.style.display = "none";
}); // Modal

var modalTrigger = document.querySelectorAll(".modal-trigger");
var modalWindow = document.querySelector(".modal");
modalTrigger === null || modalTrigger === void 0 ? void 0 : modalTrigger.forEach(function (e) {
  e.addEventListener("click", function () {
    modalToggleVisible();
  });
});

var modalToggleVisible = function modalToggleVisible() {
  modalWindow.classList.toggle("js-show");
  overlay.classList.toggle("js-show");
  lockScroll();
  setTimeout(function () {
    modalWindow.classList.remove("js-submit");
  }, 300);
}; // Validate form


if (document.querySelector("#form")) {
  var validationForm = new JustValidate("#form", {
    errorFieldCssClass: "js-invalid",
    errorLabelCssClass: "js-invalid-label",
    lockForm: true,
    errorLabelStyle: {
      textDecoration: "underlined"
    }
  });
  validationForm.addField("#user_name", [{
    rule: "minLength",
    value: 3,
    errorMessage: "Minimum 3 characters required"
  }, {
    rule: "required",
    errorMessage: "Name is required"
  }]).addField("#user_email", [{
    rule: "required",
    errorMessage: "Email is required"
  }, {
    rule: "email",
    errorMessage: "Email is invalid"
  }]).onSuccess(function (e) {
    e.preventDefault();

    if (modalWindow) {
      modalWindow.classList.add("js-submit");
    } else {
      window.location.href = 'thanks.html';
    }
  });

  if (document.querySelector("#user_company")) {
    validationForm.addField("#user_company", [{
      rule: "required",
      errorMessage: "Company is required"
    }]);
  }

  ;
}

; // Dropdown"s

if (!Element.prototype.closest) {
  if (!Element.prototype.matches) {
    Element.prototype.matches = Element.prototype.msMatchesSelector || Element.prototype.webkitMatchesSelector;
  }

  ;

  Element.prototype.closest = function (s) {
    var el = this;
    var ancestor = this;
    if (!document.documentElement.contains(el)) return null;

    do {
      if (ancestor.matches(s)) return ancestor;
      ancestor = ancestor.parentElement;
    } while (ancestor !== null);

    return null;
  };
}

;

function closeOpenNavs() {
  var openDrops = document.querySelectorAll(".dropdown__trigger");

  for (var i = 0; i < openDrops.length; i++) {
    var openDropdown = openDrops[i];

    if (openDropdown.parentElement.classList.contains("js-open")) {
      openDropdown.parentElement.classList.remove("js-open");
    }

    ;
  }

  ;
}

;
document.addEventListener("click", function (event) {
  if (!event.target.closest(".dropdown__trigger")) {
    closeOpenNavs();
  } else if (event.target.closest(".dropdown__trigger") && event.target.parentElement.closest(".js-open")) {
    event.target.closest(".dropdown__trigger").parentElement.classList.remove("js-open");
  } else if (event.target.closest(".dropdown__trigger")) {
    closeOpenNavs();
    event.target.closest(".dropdown__trigger").parentElement.classList.add("js-open");
  }
}, false); // Plan slider

var planSlider = new Swiper(".plan__slider", {
  loop: false,
  slidesPerView: 1,
  spaceBetween: 30,
  speed: 300,
  breakpoints: {
    768: {
      slidesPerView: 2
    },
    1200: {
      slidesPerView: 3
    }
  },
  pagination: {
    el: ".plan__pagination"
  },
  navigation: {
    nextEl: ".plan__button-next",
    prevEl: ".plan__button-prev"
  }
});

if (window.matchMedia("(min-width: 992px)").matches) {
  // Custom scrollbar
  document.addEventListener("DOMContentLoaded", function () {
    OverlayScrollbars(document.querySelectorAll("body"), {});
  });
} else {
  // Benefits slider
  var benefitsSlider = new Swiper(".benefits__slider", {
    loop: false,
    slidesPerView: 1,
    spaceBetween: 30,
    speed: 300,
    breakpoints: {
      768: {
        slidesPerView: 2
      }
    },
    pagination: {
      el: ".benefits__pagination"
    },
    navigation: {
      nextEl: ".benefits__button-next",
      prevEl: ".benefits__button-prev"
    }
  });
}

;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsibG9ja1Njcm9sbCIsImRvY3VtZW50IiwiYm9keSIsImNsYXNzTGlzdCIsInRvZ2dsZSIsImNvbnRhaW5zIiwidG9nZ2xlQXR0cmlidXRlIiwib3ZlcmxheSIsInF1ZXJ5U2VsZWN0b3IiLCJmb3JtIiwiYWRkRXZlbnRMaXN0ZW5lciIsImZvcm1GaWVsZElucHV0IiwicXVlcnlTZWxlY3RvckFsbCIsImZvcm1GaWVsZExhYmVsIiwiaSIsImxlbmd0aCIsInJlbW92ZSIsIm1vZGFsVG9nZ2xlVmlzaWJsZSIsInN3aXRjaExhYmVsIiwiZm9yRWFjaCIsImUiLCJjaGVja2VkIiwiYWRkIiwiY291bnRlckl0ZW0iLCJjb3VudGVySW5wdXQiLCJjb3VudGVyUGx1cyIsImNvdW50ZXJNaW51cyIsImNvdW50ZXJNYXgiLCJwYXJzZUludCIsImdldEF0dHJpYnV0ZSIsImNvdW50ZXJNaW4iLCJ2YWx1ZSIsInNldEF0dHJpYnV0ZSIsImJ1cmdlciIsImhlYWRlciIsInZpZGVvIiwidmlkZW9QbGF5QnV0dG9uIiwidmlkZW9QcmV2aWV3Iiwic3R5bGUiLCJkaXNwbGF5IiwibW9kYWxUcmlnZ2VyIiwibW9kYWxXaW5kb3ciLCJzZXRUaW1lb3V0IiwidmFsaWRhdGlvbkZvcm0iLCJKdXN0VmFsaWRhdGUiLCJlcnJvckZpZWxkQ3NzQ2xhc3MiLCJlcnJvckxhYmVsQ3NzQ2xhc3MiLCJsb2NrRm9ybSIsImVycm9yTGFiZWxTdHlsZSIsInRleHREZWNvcmF0aW9uIiwiYWRkRmllbGQiLCJydWxlIiwiZXJyb3JNZXNzYWdlIiwib25TdWNjZXNzIiwicHJldmVudERlZmF1bHQiLCJ3aW5kb3ciLCJsb2NhdGlvbiIsImhyZWYiLCJFbGVtZW50IiwicHJvdG90eXBlIiwiY2xvc2VzdCIsIm1hdGNoZXMiLCJtc01hdGNoZXNTZWxlY3RvciIsIndlYmtpdE1hdGNoZXNTZWxlY3RvciIsInMiLCJlbCIsImFuY2VzdG9yIiwiZG9jdW1lbnRFbGVtZW50IiwicGFyZW50RWxlbWVudCIsImNsb3NlT3Blbk5hdnMiLCJvcGVuRHJvcHMiLCJvcGVuRHJvcGRvd24iLCJldmVudCIsInRhcmdldCIsInBsYW5TbGlkZXIiLCJTd2lwZXIiLCJsb29wIiwic2xpZGVzUGVyVmlldyIsInNwYWNlQmV0d2VlbiIsInNwZWVkIiwiYnJlYWtwb2ludHMiLCJwYWdpbmF0aW9uIiwibmF2aWdhdGlvbiIsIm5leHRFbCIsInByZXZFbCIsIm1hdGNoTWVkaWEiLCJPdmVybGF5U2Nyb2xsYmFycyIsImJlbmVmaXRzU2xpZGVyIl0sIm1hcHBpbmdzIjoiOztBQUFBO0FBQ0EsSUFBTUEsVUFBVSxHQUFHLFNBQWJBLFVBQWEsR0FBTTtBQUN2QkMsRUFBQUEsUUFBUSxDQUFDQyxJQUFULENBQWNDLFNBQWQsQ0FBd0JDLE1BQXhCLENBQStCLFNBQS9COztBQUNBLE1BQUksQ0FBQ0gsUUFBUSxDQUFDQyxJQUFULENBQWNDLFNBQWQsQ0FBd0JFLFFBQXhCLENBQWlDLFNBQWpDLENBQUwsRUFBa0Q7QUFDaERKLElBQUFBLFFBQVEsQ0FBQ0MsSUFBVCxDQUFjSSxlQUFkLENBQThCLE9BQTlCO0FBQ0QsR0FGRCxNQUVPO0FBQ0w7QUFDRDtBQUNGLENBUEQsQyxDQVNBOzs7QUFDQSxJQUFJQyxPQUFPLEdBQUdOLFFBQVEsQ0FBQ08sYUFBVCxDQUF1QixVQUF2QixDQUFkO0FBQ0EsSUFBSUMsSUFBSSxHQUFHUixRQUFRLENBQUNPLGFBQVQsQ0FBdUIsT0FBdkIsQ0FBWDtBQUVBRCxPQUFPLFNBQVAsSUFBQUEsT0FBTyxXQUFQLFlBQUFBLE9BQU8sQ0FBRUcsZ0JBQVQsQ0FBMEIsT0FBMUIsRUFBbUMsWUFBTTtBQUN2QyxNQUFJQyxjQUFjLEdBQUdWLFFBQVEsQ0FBQ1csZ0JBQVQsQ0FBMEIsb0JBQTFCLENBQXJCO0FBQ0EsTUFBSUMsY0FBYyxHQUFHWixRQUFRLENBQUNXLGdCQUFULENBQTBCLG1CQUExQixDQUFyQjs7QUFFQSxPQUFLLElBQUlFLENBQUMsR0FBRyxDQUFiLEVBQWdCQSxDQUFD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QSxNQUFNLEVBQUU7QUFGRTtBQWpCaUMsQ0FBNUIsQ0FBbkI7O0FBdUJBLElBQUk3QixNQUFNLENBQUM4QixVQUFQLENBQWtCLG9CQUFsQixFQUF3Q3hCLE9BQTVDLEVBQXFEO0FBQ25EO0FBQ0E1RCxFQUFBQSxRQUFRLENBQUNTLGdCQUFULENBQTBCLGtCQUExQixFQUE4QyxZQUFXO0FBQ3ZENEUsSUFBQUEsaUJBQWlCLENBQUNyRixRQUFRLENBQUNXLGdCQUFULENBQTBCLE1BQTFCLENBQUQsRUFBb0MsRUFBcEMsQ0FBakI7QUFDRCxHQUZEO0FBR0QsQ0FMRCxNQUtPO0FBQ0w7QUFDQSxNQUFNMkUsY0FBYyxHQUFHLElBQUlaLE1BQUosQ0FBVyxtQkFBWCxFQUFnQztBQUNyREMsSUFBQUEsSUFBSSxFQUFFLEtBRCtDO0FBRXJEQyxJQUFBQSxhQUFhLEVBQUUsQ0FGc0M7QUFHckRDLElBQUFBLFlBQVksRUFBRSxFQUh1QztBQUlyREMsSUFBQUEsS0FBSyxFQUFFLEdBSjhDO0FBS3JEQyxJQUFBQSxXQUFXLEVBQUU7QUFDWCxXQUFLO0FBQ0hILFFBQUFBLGFBQWEsRUFBRTtBQURaO0FBRE0sS0FMd0M7QUFXckRJLElBQUFBLFVBQVUsRUFBRTtBQUNWaEIsTUFBQUEsRUFBRSxFQUFFO0FBRE0sS0FYeUM7QUFjckRpQixJQUFBQSxVQUFVLEVBQUU7QUFDVkMsTUFBQUEsTUFBTSxFQUFFLHdCQURFO0FBRVZDLE1BQUFBLE1BQU0sRUFBRTtBQUZFO0FBZHlDLEdBQWhDLENBQXZCO0FBbUJEOztBQUFBIiwiZmlsZSI6Im1haW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBMb2NrIHNjcm9sbCBvbiBib2R5XHJcbmNvbnN0IGxvY2tTY3JvbGwgPSAoKSA9PiB7XHJcbiAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QudG9nZ2xlKFwianMtbG9ja1wiKTtcclxuICBpZiAoIWRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmNvbnRhaW5zKFwianMtbG9ja1wiKSkge1xyXG4gICAgZG9jdW1lbnQuYm9keS50b2dnbGVBdHRyaWJ1dGUoXCJjbGFzc1wiKTtcclxuICB9IGVsc2Uge1xyXG4gICAgbnVsbFxyXG4gIH1cclxufTtcclxuXHJcbi8vIENsaWNrIG9uIG92ZXJsYXlcclxubGV0IG92ZXJsYXkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm92ZXJsYXlcIik7XHJcbmxldCBmb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNmb3JtXCIpO1xyXG5cclxub3ZlcmxheT8uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBsZXQgZm9ybUZpZWxkSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmZvcm1fX2ZpZWxkIGlucHV0XCIpO1xyXG4gIGxldCBmb3JtRmllbGRMYWJlbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuanMtaW52YWxpZC1sYWJlbFwiKTtcclxuXHJcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBmb3JtRmllbGRJbnB1dC5sZW5ndGg7IGkrKyl7XHJcbiAgICBmb3JtRmllbGRJbnB1dFtpXS5jbGFzc0xpc3QucmVtb3ZlKCdqcy1pbnZhbGlkJyk7XHJcbiAgfVxyXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgZm9ybUZpZWxkTGFiZWwubGVuZ3RoOyBpKyspe1xyXG4gICAgZm9ybUZpZWxkTGFiZWxbaV0ucmVtb3ZlKCk7XHJcbiAgfVxyXG4gIG1vZGFsVG9nZ2xlVmlzaWJsZSgpXHJcbn0pO1xyXG5cclxuLy8gQ3VzdG9tIHN3aXRjaCBidXR0b25cclxubGV0IHN3aXRjaExhYmVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5zd2l0Y2hfX2xhYmVsXCIpO1xyXG5cclxuc3dpdGNoTGFiZWw/LmZvckVhY2goKGUpID0+IHtcclxuICBlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICBpZiAoZS5xdWVyeVNlbGVjdG9yKFwiaW5wdXRcIikuY2hlY2tlZCkge1xyXG4gICAgICBlLmNsYXNzTGlzdC5hZGQoXCJqcy10b2dnbGVcIik7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBlLmNsYXNzTGlzdC5yZW1vdmUoXCJqcy10b2dnbGVcIik7XHJcbiAgICB9XHJcbiAgfSlcclxufSk7XHJcblxyXG4vLyBDdXN0b20gY291bnRlclxyXG5sZXQgY291bnRlckl0ZW0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmNvdW50ZXJfX2l0ZW1cIik7XHJcblxyXG5jb3VudGVySXRlbT8uZm9yRWFjaCgoZSkgPT4ge1xyXG4gIGxldCBjb3VudGVySW5wdXQgPSBlLnF1ZXJ5U2VsZWN0b3IoXCIuY291bnRlcl9faW5wdXRcIik7XHJcbiAgbGV0IGNvdW50ZXJQbHVzID0gZS5xdWVyeVNlbGVjdG9yKFwiLmNvdW50ZXJfX3BsdXNcIik7XHJcbiAgbGV0IGNvdW50ZXJNaW51cyA9IGUucXVlcnlTZWxlY3RvcihcIi5jb3VudGVyX19taW51c1wiKTtcclxuXHJcbiAgbGV0IGNvdW50ZXJNYXggPSBwYXJzZUludChjb3VudGVySW5wdXQuZ2V0QXR0cmlidXRlKFwibWF4XCIpKTtcclxuICBsZXQgY291bnRlck1pbiA9IHBhcnNlSW50KGNvdW50ZXJJbnB1dC5nZXRBdHRyaWJ1dGUoXCJtaW5cIikpO1xyXG5cclxuICBjb3VudGVyUGx1cy5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgaWYgKGNvdW50ZXJJbnB1dC52YWx1ZSA+PSBjb3VudGVyTWF4ICkge1xyXG4gICAgICBjb3VudGVySW5wdXQudmFsdWUgPSBjb3VudGVyTWF4O1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgY291bnRlcklucHV0LnZhbHVlKytcclxuICAgICAgY291bnRlcklucHV0LnNldEF0dHJpYnV0ZShcInZhbHVlXCIsIGNvdW50ZXJJbnB1dC52YWx1ZSk7XHJcbiAgICB9XHJcbiAgfSk7XHJcbiAgXHJcbiAgY291bnRlck1pbnVzLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICBpZiAoY291bnRlcklucHV0LnZhbHVlIDw9IGNvdW50ZXJNaW4gKSB7XHJcbiAgICAgIGNvdW50ZXJJbnB1dC52YWx1ZSA9IGNvdW50ZXJNaW47XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjb3VudGVySW5wdXQudmFsdWUtLVxyXG4gICAgICBjb3VudGVySW5wdXQuc2V0QXR0cmlidXRlKFwidmFsdWVcIiwgY291bnRlcklucHV0LnZhbHVlKTtcclxuICAgIH1cclxuICB9KTtcclxuXHJcbiAgY291bnRlcklucHV0LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXl1cFwiLCAoKSA9PiB7XHJcbiAgICBpZiAoY291bnRlcklucHV0LnZhbHVlID49IGNvdW50ZXJNYXgpIHtcclxuICAgICAgY291bnRlcklucHV0LnZhbHVlID0gY291bnRlck1heDtcclxuICAgIH0gZWxzZSBpZiAoY291bnRlcklucHV0LnZhbHVlIDw9IGNvdW50ZXJNaW4pIHtcclxuICAgICAgY291bnRlcklucHV0LnZhbHVlID0gY291bnRlck1pbjtcclxuICAgIH0gZWxzZSAge1xyXG4gICAgICBudWxsXHJcbiAgICB9XHJcbiAgfSk7XHJcbn0pO1xyXG5cclxuLy8gT3BlbiBtZW51IG9uIGNsaWNrIHRvIEJ1cmdlclxyXG5sZXQgYnVyZ2VyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5idXJnZXJcIik7XHJcbmxldCBoZWFkZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmhlYWRlclwiKTtcclxuXHJcbmJ1cmdlci5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIGhlYWRlci5jbGFzc0xpc3QudG9nZ2xlKFwianMtbmF2LW9wZW5cIik7XHJcbiAgbG9ja1Njcm9sbCgpO1xyXG59KTtcclxuXHJcbi8vIFZpZGVvXHJcbmxldCB2aWRlbyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudmlkZW9fX2l0ZW1cIik7XHJcbmxldCB2aWRlb1BsYXlCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnZpZGVvX19wbGF5XCIpO1xyXG5sZXQgdmlkZW9QcmV2aWV3ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi52aWRlb19fcHJldmlld1wiKTtcclxuXHJcbnZpZGVvUGxheUJ1dHRvbj8uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICB2aWRlby5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xyXG4gIHZpZGVvUGxheUJ1dHRvbi5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcbn0pO1xyXG5cclxuLy8gTW9kYWxcclxubGV0IG1vZGFsVHJpZ2dlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIubW9kYWwtdHJpZ2dlclwiKTtcclxubGV0IG1vZGFsV2luZG93ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbFwiKTtcclxuXHJcbm1vZGFsVHJpZ2dlcj8uZm9yRWFjaCgoZSkgPT4ge1xyXG4gIGUuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgIG1vZGFsVG9nZ2xlVmlzaWJsZSgpO1xyXG4gIH0pO1xyXG59KTtcclxuXHJcbmNvbnN0IG1vZGFsVG9nZ2xlVmlzaWJsZSA9ICgpID0+IHtcclxuICBtb2RhbFdpbmRvdy5jbGFzc0xpc3QudG9nZ2xlKFwianMtc2hvd1wiKTtcclxuICBvdmVybGF5LmNsYXNzTGlzdC50b2dnbGUoXCJqcy1zaG93XCIpO1xyXG4gIGxvY2tTY3JvbGwoKTtcclxuICBzZXRUaW1lb3V0KCAoKSA9PiB7XHJcbiAgICBtb2RhbFdpbmRvdy5jbGFzc0xpc3QucmVtb3ZlKFwianMtc3VibWl0XCIpO1xyXG4gIH0sIDMwMCk7XHJcbn07XHJcblxyXG4vLyBWYWxpZGF0ZSBmb3JtXHJcbmlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2Zvcm1cIikpIHtcclxuICBjb25zdCB2YWxpZGF0aW9uRm9ybSA9IG5ldyBKdXN0VmFsaWRhdGUoXCIjZm9ybVwiLCB7XHJcbiAgICBlcnJvckZpZWxkQ3NzQ2xhc3M6IFwianMtaW52YWxpZFwiLFxyXG4gICAgZXJyb3JMYWJlbENzc0NsYXNzOiBcImpzLWludmFsaWQtbGFiZWxcIixcclxuICAgIGxvY2tGb3JtOiB0cnVlLFxyXG4gICAgZXJyb3JMYWJlbFN0eWxlOiB7XHJcbiAgICAgIHRleHREZWNvcmF0aW9uOiBcInVuZGVybGluZWRcIixcclxuICAgIH0sXHJcbiAgfSk7XHJcblxyXG4gIHZhbGlkYXRpb25Gb3JtXHJcbiAgICAuYWRkRmllbGQoXCIjdXNlcl9uYW1lXCIsIFtcclxuICAgICAge1xyXG4gICAgICAgIHJ1bGU6IFwibWluTGVuZ3RoXCIsXHJcbiAgICAgICAgdmFsdWU6IDMsXHJcbiAgICAgICAgZXJyb3JNZXNzYWdlOiBcIk1pbmltdW0gMyBjaGFyYWN0ZXJzIHJlcXVpcmVkXCIsXHJcbiAgICAgIH0sXHJcbiAgICAgIHtcclxuICAgICAgICBydWxlOiBcInJlcXVpcmVkXCIsXHJcbiAgICAgICAgZXJyb3JNZXNzYWdlOiBcIk5hbWUgaXMgcmVxdWlyZWRcIixcclxuICAgICAgfSxcclxuICAgIF0pXHJcbiAgICAuYWRkRmllbGQoXCIjdXNlcl9lbWFpbFwiLCBbXHJcbiAgICAgIHtcclxuICAgICAgICBydWxlOiBcInJlcXVpcmVkXCIsXHJcbiAgICAgICAgZXJyb3JNZXNzYWdlOiBcIkVtYWlsIGlzIHJlcXVpcmVkXCIsXHJcbiAgICAgIH0sXHJcbiAgICAgIHtcclxuICAgICAgICBydWxlOiBcImVtYWlsXCIsXHJcbiAgICAgICAgZXJyb3JNZXNzYWdlOiBcIkVtYWlsIGlzIGludmFsaWRcIixcclxuICAgICAgfSxcclxuICAgIF0pXHJcbiAgICAub25TdWNjZXNzKChlKSA9PiB7XHJcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgaWYgKG1vZGFsV2luZG93KSB7XHJcbiAgICAgICAgbW9kYWxXaW5kb3cuY2xhc3NMaXN0LmFkZChcImpzLXN1Ym1pdFwiKVxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gJ3RoYW5rcy5odG1sJztcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgXHJcbiAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjdXNlcl9jb21wYW55XCIpKSB7XHJcbiAgICB2YWxpZGF0aW9uRm9ybVxyXG4gICAgICAuYWRkRmllbGQoXCIjdXNlcl9jb21wYW55XCIsIFtcclxuICAgICAge1xyXG4gICAgICAgIHJ1bGU6IFwicmVxdWlyZWRcIiwgXHJcbiAgICAgICAgZXJyb3JNZXNzYWdlOiBcIkNvbXBhbnkgaXMgcmVxdWlyZWRcIixcclxuICAgICAgfSxcclxuICAgIF0pXHJcbiAgfTtcclxufTtcclxuXHJcbi8vIERyb3Bkb3duXCJzXHJcbmlmICghRWxlbWVudC5wcm90b3R5cGUuY2xvc2VzdCkge1xyXG5cdGlmICghRWxlbWVudC5wcm90b3R5cGUubWF0Y2hlcykge1xyXG5cdFx0RWxlbWVudC5wcm90b3R5cGUubWF0Y2hlcyA9IEVsZW1lbnQucHJvdG90eXBlLm1zTWF0Y2hlc1NlbGVjdG9yIHx8IEVsZW1lbnQucHJvdG90eXBlLndlYmtpdE1hdGNoZXNTZWxlY3RvcjtcclxuXHR9O1xyXG5cdEVsZW1lbnQucHJvdG90eXBlLmNsb3Nlc3QgPSBmdW5jdGlvbiAocykge1xyXG5cdFx0dmFyIGVsID0gdGhpcztcclxuXHRcdHZhciBhbmNlc3RvciA9IHRoaXM7XHJcblx0XHRpZiAoIWRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jb250YWlucyhlbCkpIHJldHVybiBudWxsO1xyXG5cdFx0ZG8ge1xyXG5cdFx0XHRpZiAoYW5jZXN0b3IubWF0Y2hlcyhzKSkgcmV0dXJuIGFuY2VzdG9yO1xyXG5cdFx0XHRhbmNlc3RvciA9IGFuY2VzdG9yLnBhcmVudEVsZW1lbnQ7XHJcblx0XHR9IHdoaWxlIChhbmNlc3RvciAhPT0gbnVsbCk7XHJcblx0XHRyZXR1cm4gbnVsbDtcclxuXHR9O1xyXG59O1xyXG5cclxuZnVuY3Rpb24gY2xvc2VPcGVuTmF2cygpIHtcclxuICB2YXIgb3BlbkRyb3BzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5kcm9wZG93bl9fdHJpZ2dlclwiKTtcclxuXHRmb3IgKHZhciBpID0gMDsgaSA8IG9wZW5Ecm9wcy5sZW5ndGg7IGkrKykge1xyXG5cdFx0dmFyIG9wZW5Ecm9wZG93biA9IG9wZW5Ecm9wc1tpXTtcclxuXHRcdGlmIChvcGVuRHJvcGRvd24ucGFyZW50RWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoXCJqcy1vcGVuXCIpKSB7XHJcblx0XHQgIG9wZW5Ecm9wZG93bi5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJqcy1vcGVuXCIpO1xyXG5cdFx0fTtcclxuXHR9O1xyXG59O1xyXG5cclxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uIChldmVudCkge1xyXG5cdGlmICghZXZlbnQudGFyZ2V0LmNsb3Nlc3QoXCIuZHJvcGRvd25fX3RyaWdnZXJcIikpe1xyXG5cdFx0Y2xvc2VPcGVuTmF2cygpO1xyXG5cdH0gXHJcblx0ZWxzZSBpZiAoZXZlbnQudGFyZ2V0LmNsb3Nlc3QoXCIuZHJvcGRvd25fX3RyaWdnZXJcIikgJiYgZXZlbnQudGFyZ2V0LnBhcmVudEVsZW1lbnQuY2xvc2VzdChcIi5qcy1vcGVuXCIpKXtcclxuXHRcdGV2ZW50LnRhcmdldC5jbG9zZXN0KFwiLmRyb3Bkb3duX190cmlnZ2VyXCIpLnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcImpzLW9wZW5cIik7XHJcblx0fVxyXG5cdGVsc2UgaWYgKGV2ZW50LnRhcmdldC5jbG9zZXN0KFwiLmRyb3Bkb3duX190cmlnZ2VyXCIpKXtcclxuXHRcdGNsb3NlT3Blbk5hdnMoKTtcclxuXHRcdGV2ZW50LnRhcmdldC5jbG9zZXN0KFwiLmRyb3Bkb3duX190cmlnZ2VyXCIpLnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImpzLW9wZW5cIik7XHJcblx0fVxyXG5cdFxyXG59LCBmYWxzZSk7XHJcblxyXG4vLyBQbGFuIHNsaWRlclxyXG5jb25zdCBwbGFuU2xpZGVyID0gbmV3IFN3aXBlcihcIi5wbGFuX19zbGlkZXJcIiwge1xyXG4gIGxvb3A6IGZhbHNlLFxyXG4gIHNsaWRlc1BlclZpZXc6IDEsXHJcbiAgc3BhY2VCZXR3ZWVuOiAzMCxcclxuICBzcGVlZDogMzAwLFxyXG4gIGJyZWFrcG9pbnRzOiB7XHJcbiAgICA3Njg6IHtcclxuICAgICAgc2xpZGVzUGVyVmlldzogMixcclxuICAgIH0sXHJcbiAgICAxMjAwOiB7XHJcbiAgICAgIHNsaWRlc1BlclZpZXc6IDMsXHJcbiAgICB9LFxyXG4gIH0sXHJcblxyXG4gIHBhZ2luYXRpb246IHtcclxuICAgIGVsOiBcIi5wbGFuX19wYWdpbmF0aW9uXCIsXHJcbiAgfSxcclxuICBuYXZpZ2F0aW9uOiB7XHJcbiAgICBuZXh0RWw6IFwiLnBsYW5fX2J1dHRvbi1uZXh0XCIsXHJcbiAgICBwcmV2RWw6IFwiLnBsYW5fX2J1dHRvbi1wcmV2XCIsXHJcbiAgfSxcclxufSk7XHJcblxyXG5pZiAod2luZG93Lm1hdGNoTWVkaWEoXCIobWluLXdpZHRoOiA5OTJweClcIikubWF0Y2hlcykge1xyXG4gIC8vIEN1c3RvbSBzY3JvbGxiYXJcclxuICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLCBmdW5jdGlvbigpIHtcclxuICAgIE92ZXJsYXlTY3JvbGxiYXJzKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCJib2R5XCIpLCB7IH0pO1xyXG4gIH0pO1xyXG59IGVsc2Uge1xyXG4gIC8vIEJlbmVmaXRzIHNsaWRlclxyXG4gIGNvbnN0IGJlbmVmaXRzU2xpZGVyID0gbmV3IFN3aXBlcihcIi5iZW5lZml0c19fc2xpZGVyXCIsIHtcclxuICAgIGxvb3A6IGZhbHNlLFxyXG4gICAgc2xpZGVzUGVyVmlldzogMSxcclxuICAgIHNwYWNlQmV0d2VlbjogMzAsXHJcbiAgICBzcGVlZDogMzAwLFxyXG4gICAgYnJlYWtwb2ludHM6IHtcclxuICAgICAgNzY4OiB7XHJcbiAgICAgICAgc2xpZGVzUGVyVmlldzogMixcclxuICAgICAgfSxcclxuICAgIH0sXHJcblxyXG4gICAgcGFnaW5hdGlvbjoge1xyXG4gICAgICBlbDogXCIuYmVuZWZpdHNfX3BhZ2luYXRpb25cIixcclxuICAgIH0sXHJcbiAgICBuYXZpZ2F0aW9uOiB7XHJcbiAgICAgIG5leHRFbDogXCIuYmVuZWZpdHNfX2J1dHRvbi1uZXh0XCIsXHJcbiAgICAgIHByZXZFbDogXCIuYmVuZWZpdHNfX2J1dHRvbi1wcmV2XCIsXHJcbiAgICB9LFxyXG4gIH0pO1xyXG59OyJdfQ==